!function(e){var t={};function n(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(s,r,function(t){return e[t]}.bind(null,r));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e){e.exports=JSON.parse('[{"title":"Research Dissemination","description":"Conducting novel research requires deep understanding and expertise in a specific area. Once achieved, researchers continue contributing new knowledge for future people to use and build upon. Over time, this consistent addition of new knowledge can build up, contributing to what some have called research debt [olah2017research]. Not everyone is an expert in every field, and it can be easy to lose perspective and forget the bigger picture [matt might]. Yet research should be understood by many. Interactive articles can be used to distill the latest progress in various research fields and make their methods and results accessible and understandable to a broader audience.","opportunities":["Engage and excite broader audience with latest research progress","Remove research debt, onboard new researchers","Make faster and clearer research progress"],"challenges":["No clear incentive structure for researchers","Little funding for bespoke research dissemination and communication","Not seen as a legitimate research contribution (e.g., to field, or one’s career)"],"examples":[{"title":"Attacking Discrimination with Smarter Machine Learning","description":"This companion piece to a traditional research paper uses interactive graphics to let readers adjust a machine learning model’s behavior and visualize results for a loan granting scenario.","url":"https://research.google.com/bigpicture/attacking-discrimination-in-ml/","image":"research-ex1.png"},{"title":"Coeffects: Context-aware Programming Languages","description":"This PhD thesis contributes a programming language abstraction for understanding how programs access the context or environment in which they execute, and walks readers through the work using two simple context-aware languages with live in-browser demos.","url":"http://tomasp.net/coeffects/","image":"research-ex2.png"},{"title":"What is Complexity Science?","description":"A crash course in complex systems science, created by leading experts, practitioners, and students in the field, with accompanying interactive sandboxes to simulate, control, and visualize different complex systems.","url":"https://complexityexplained.github.io/","image":"research-ex3.png"}]},{"title":"Journalism","description":"An informed public strengthens society. While many newsworthy and current events are reported daily, unfortunately the complexity and nuance of such topics are lost in the wildfire sharing of short headlines. This is effective dissemination without context. Yet many of the most impactful stories require a deep understanding of the various locations, personale, and perspectives involved. Interactive articles can be used to breakdown these complex topics into more approachable pieces, show their connections in relation to the main message, highlight the impact of investigate reports, and inform a wide readership of current events and impactful stories.","opportunities":["Tell stories from multiple dynamic perspectives and levels of detail","Highlight importance of a story or report","TK"],"challenges":["Require active reading in a reader that may be expecting bite-sized news","Many readers viewing on mobile devices requires responsive design","TK"],"examples":[{"title":"What’s Really Warming the World?","description":"A segmented-story that layers different natural and industrial factors recorded since 1880 on the same axis to compare and contrast which factors are correlated with the increase of the global temperature rise.","url":"https://www.bloomberg.com/graphics/2015-whats-warming-the-world/","image":"placeholder.png"},{"title":"You Draw It: How Family Income Predicts Children’s College Chances","description":"An article with an empty visualization that prompts the reader to draw the line that describes the relationship between family income and the percentage of children who attend college, challenging one’s prior belief about the data.","url":"https://www.nytimes.com/interactive/2015/05/28/upshot/you-draw-it-how-family-income-affects-childrens-college-chances.html","image":"placeholder.png"},{"title":"Example 3","description":"EX 3 [uber game or gun deaths]","url":"","image":"placeholder.png"}]},{"title":"Education","description":"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Totam nihil doloremque facilis ab illo velit consequatur? Blanditiis, alias? Laborum quisquam ex sequi officia? Pariatur exercitationem quidem hic aliquam et sunt.","opportunities":["Reinforce learning by presenting content in multiple forms","More quickly grapple complex topics that require visual or geometric interpretations","TK"],"challenges":["TK","TK","TK"],"examples":[{"title":"Let’s Learn About Waveforms","description":"An interactive guide that introduces and explores waveforms without requiring prior knowledge. The article lets readers play with different waveforms using sound to understand their basic physics and relationship to music and harmony.","url":"https://pudding.cool/2018/02/waveforms/","image":"placeholder.png"},{"title":"The Book of Shaders","description":"A step-by-step guide that walks a reader through the notoriously challenging topic of computer graphics fragment shaders using interactive code examples.","url":"https://thebookofshaders.com/","image":"placeholder.png"},{"title":"EconGraphs","description":"While most interactive textbooks are about mathematics, this collection of key concepts from economics using interactive visualization to help econ teachers illustrate important underlying relationships within economic models.","url":"http://www.econgraphs.org/","image":"placeholder.png"}]},{"title":"Policy Making","description":"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Totam nihil doloremque facilis ab illo velit consequatur? Blanditiis, alias? Laborum quisquam ex sequi officia? Pariatur exercitationem quidem hic aliquam et sunt.","opportunities":["Concretize complex societal issues using experimental sandboxes","Inform public of past, present, and future policies and their impact","TK"],"challenges":["Often asks for greater numeracy and graphicacy in citizens","TK","TK"],"examples":[{"title":"To Build a Better Ballot","description":"An explorable explanation that uses direct manipulation to show election outcomes under different voting methods to provide concrete tools for voting reform.","url":"https://ncase.me/ballot/","image":"placeholder.png"},{"title":"The Atlas Of Redistricting","description":"Visualizations of the United States and its breakdown on governmental representation and gerrymandering. Interactive toggles that redraw district boundaries compare the makeup of the US House of Representatives under different goals, both partisan and bipartisan, all without a single voter moving.","url":"https://projects.fivethirtyeight.com/redistricting-maps/","image":"placeholder.png"},{"title":"Is It Better to Rent or Buy?","description":"Built into this article is an interactive calculator that suggests if a reader should buy or rent a property based on a collection of user-selected costs.","url":"https://www.nytimes.com/interactive/2014/upshot/buy-rent-calculator.html","image":"placeholder.png"}]}]')},function(e,t,n){"use strict";n.r(t);function s(){}function r(e){return e()}function i(){return Object.create(null)}function l(e){e.forEach(r)}function o(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function c(e,t){const n=e.subscribe(t);return n.unsubscribe?()=>n.unsubscribe():n}function d(e,t,n){e.$$.on_destroy.push(c(t,n))}function u(e,t,n,s){if(e){const r=h(e,t,n,s);return e[0](r)}}function h(e,t,n,s){return e[1]&&s?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](s(t))):n.ctx}function p(e,t,n,s){if(e[2]&&s){const r=e[2](s(n));if("object"==typeof t.dirty){const e=[],n=Math.max(t.dirty.length,r.length);for(let s=0;s<n;s+=1)e[s]=t.dirty[s]|r[s];return e}return t.dirty|r}return t.dirty}function f(e){return null==e?"":e}new Set;function g(e,t){e.appendChild(t)}function m(e,t,n){e.insertBefore(t,n||null)}function v(e){e.parentNode.removeChild(e)}function y(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function b(e){return document.createElement(e)}function x(e){return document.createTextNode(e)}function $(){return x(" ")}function w(){return x("")}function z(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function j(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function k(e,t){t=""+t,e.data!==t&&(e.data=t)}function T(e,t){(null!=t||e.value)&&(e.value=t)}function C(e,t,n,s){e.style.setProperty(t,n,s?"important":"")}function E(e,t,n){e.classList[n?"add":"remove"](t)}let I;function _(e){I=e}function q(){if(!I)throw new Error("Function called outside component initialization");return I}function B(e){q().$$.on_destroy.push(e)}function O(e){return q().$$.context.get(e)}const A=[],P=[],L=[],M=[],S=Promise.resolve();let D=!1;function R(){D||(D=!0,S.then(H))}function N(e){L.push(e)}function H(){const e=new Set;do{for(;A.length;){const e=A.shift();_(e),K(e.$$)}for(;P.length;)P.pop()();for(let t=0;t<L.length;t+=1){const n=L[t];e.has(n)||(n(),e.add(n))}L.length=0}while(A.length);for(;M.length;)M.pop()();D=!1}function K(e){if(null!==e.fragment){e.update(),l(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(N)}}const W=new Set;let Y;function F(){Y={r:0,c:[],p:Y}}function J(){Y.r||l(Y.c),Y=Y.p}function U(e,t){e&&e.i&&(W.delete(e),e.i(t))}function G(e,t,n,s){if(e&&e.o){if(W.has(e))return;W.add(e),Y.c.push(()=>{W.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}}"undefined"!=typeof window?window:global;new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);let V;function X(e){e&&e.c()}function Q(e,t,n){const{fragment:s,on_mount:i,on_destroy:a,after_update:c}=e.$$;s&&s.m(t,n),N(()=>{const t=i.map(r).filter(o);a?a.push(...t):l(t),e.$$.on_mount=[]}),c.forEach(N)}function Z(e,t){const n=e.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ee(e,t,n,r,o,a,c=[-1]){const d=I;_(e);const u=t.props||{},h=e.$$={fragment:null,ctx:null,props:a,update:s,not_equal:o,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:i(),dirty:c};let p=!1;var f;h.ctx=n?n(e,u,(t,n,...s)=>{const r=s.length?s[0]:n;return h.ctx&&o(h.ctx[t],h.ctx[t]=r)&&(h.bound[t]&&h.bound[t](r),p&&function(e,t){-1===e.$$.dirty[0]&&(A.push(e),R(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n}):[],h.update(),p=!0,l(h.before_update),h.fragment=!!r&&r(h.ctx),t.target&&(t.hydrate?h.fragment&&h.fragment.l((f=t.target,Array.from(f.childNodes))):h.fragment&&h.fragment.c(),t.intro&&U(e.$$.fragment),Q(e,t.target,t.anchor),H()),_(d)}"function"==typeof HTMLElement&&(V=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}$destroy(){Z(this,1),this.$destroy=s}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}});class te{$destroy(){Z(this,1),this.$destroy=s}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function ne(e){let t;return{c(){t=b("table"),t.innerHTML='<thead><tr><th class="svelte-652fg4"></th> \n      <th scope="col" class="svelte-652fg4">Research</th> \n      <th scope="col" class="svelte-652fg4">Practice</th></tr></thead> \n  <tbody><tr><th scope="row" class="svelte-652fg4">Authoring</th> \n      <td class="svelte-652fg4">Next generation tooling</td> \n      <td class="svelte-652fg4">Evaluate in production setting, identify bugs</td></tr> \n    <tr><th scope="row" class="svelte-652fg4">Designing</th> \n      <td class="svelte-652fg4">Developing theory, conducting laboratory studies</td> \n      <td class="svelte-652fg4">Evaluate specific design decisions in the wild, understand constraints</td></tr> \n    <tr><th scope="row" class="svelte-652fg4">Publishing</th> \n      <td class="svelte-652fg4">Tools, guidelines, and best practices</td> \n      <td class="svelte-652fg4">Concrete examples for others to follow, available source code, accessible archives, DOI, branding</td></tr></tbody>',j(t,"id","research-x-practice-table"),j(t,"class","svelte-652fg4")},m(e,n){m(e,t,n)},p:s,i:s,o:s,d(e){e&&v(t)}}}var se=class extends te{constructor(e){var t;super(),document.getElementById("svelte-652fg4-style")||((t=b("style")).id="svelte-652fg4-style",t.textContent="#research-x-practice-table.svelte-652fg4.svelte-652fg4{overflow-x:scroll;width:100%}#research-x-practice-table.svelte-652fg4 th.svelte-652fg4{white-space:nowrap}#research-x-practice-table.svelte-652fg4 tbody th.svelte-652fg4{font-weight:initial;border-bottom:1px solid rgb(242, 242, 242)}#research-x-practice-table.svelte-652fg4 tbody tr:last-of-type th.svelte-652fg4{border-bottom:inherit}#research-x-practice-table.svelte-652fg4 td.svelte-652fg4{border-color:rgb(242, 242, 242)}",g(document.head,t)),ee(this,e,null,ne,a,{})}};function re(e){let t;return{c(){t=b("nav"),t.innerHTML='<h3>Contents</h3> \n\n  <div class="svelte-hetnyh"><a href="#introduction" class="svelte-hetnyh">Introduction</a></div> \n\n  <details class="svelte-hetnyh"><summary class="svelte-hetnyh">The Capabilities of Interactive Articles</summary> \n    <a href="#interactive-articles" class="svelte-hetnyh"><em>navigate to &quot;The Capabilities of Interactive Articles&quot;</em></a> \n    <ul class="svelte-hetnyh"><li class="svelte-hetnyh"><a href="#improving-recall" class="svelte-hetnyh">Improving Recall</a></li> \n      <li class="svelte-hetnyh"><a href="#improving-engagement" class="svelte-hetnyh">Improving Engagement</a></li> \n      <li class="svelte-hetnyh"><a href="#enabling-experience" class="svelte-hetnyh">Enabling Experience</a></li> \n      <li class="svelte-hetnyh"><a href="#reducing-cognitive-load" class="svelte-hetnyh">Reducing Cognitive Load</a></li> \n      <li class="svelte-hetnyh"><a href="#personalization" class="svelte-hetnyh">Personalization</a></li></ul></details> \n\n  <div class="svelte-hetnyh"><a href="#applications" class="svelte-hetnyh">Applications</a></div> \n\n  <div class="svelte-hetnyh"><a href="#critical-reflections" class="svelte-hetnyh">Critical Reflections</a></div> \n\n  <div class="svelte-hetnyh"><a href="#challenges" class="svelte-hetnyh">Challenges of Interactive Writing</a></div> \n\n  <div class="svelte-hetnyh"><a href="#discussion" class="svelte-hetnyh">Discussion</a></div>',j(t,"class","l-text toc figcaption svelte-hetnyh")},m(e,n){m(e,t,n)},p:s,i:s,o:s,d(e){e&&v(t)}}}var ie=class extends te{constructor(e){var t;super(),document.getElementById("svelte-hetnyh-style")||((t=b("style")).id="svelte-hetnyh-style",t.textContent="nav.svelte-hetnyh.svelte-hetnyh a.svelte-hetnyh.svelte-hetnyh{color:rgba(0, 0, 0, 0.8);border-bottom:none;text-decoration:none}nav.svelte-hetnyh.svelte-hetnyh ul li.svelte-hetnyh.svelte-hetnyh{margin-bottom:0.25em}nav.svelte-hetnyh.svelte-hetnyh a.svelte-hetnyh.svelte-hetnyh:hover{text-decoration:underline solid rgba(0, 0, 0, 0.6)}nav.svelte-hetnyh.svelte-hetnyh details ul.svelte-hetnyh.svelte-hetnyh{margin-top:0}nav.svelte-hetnyh details.svelte-hetnyh>a.svelte-hetnyh{margin-left:1.06em}nav.svelte-hetnyh.svelte-hetnyh summary.svelte-hetnyh.svelte-hetnyh,nav.svelte-hetnyh.svelte-hetnyh>div.svelte-hetnyh.svelte-hetnyh,nav.svelte-hetnyh details.svelte-hetnyh>a.svelte-hetnyh{display:block;outline:none;margin-bottom:0.5em}nav.svelte-hetnyh.svelte-hetnyh>div.svelte-hetnyh.svelte-hetnyh{margin-left:1.06em}nav.svelte-hetnyh.svelte-hetnyh summary.svelte-hetnyh.svelte-hetnyh{cursor:context-menu}nav.svelte-hetnyh.svelte-hetnyh summary.svelte-hetnyh.svelte-hetnyh,nav.svelte-hetnyh>div.svelte-hetnyh>a.svelte-hetnyh{font-size:13px;font-weight:600}",g(document.head,t)),ee(this,e,null,re,a,{})}};const le=[];function oe(e,t=s){let n;const r=[];function i(t){if(a(e,t)&&(e=t,n)){const t=!le.length;for(let t=0;t<r.length;t+=1){const n=r[t];n[1](),le.push(n,e)}if(t){for(let e=0;e<le.length;e+=2)le[e][0](le[e+1]);le.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(l,o=s){const a=[l,o];return r.push(a),1===r.length&&(n=t(i)||s),l(e),()=>{const e=r.indexOf(a);-1!==e&&r.splice(e,1),0===r.length&&(n(),n=null)}}}}function ae(e){let t,n;const s=e[5].default,r=u(s,e,e[4],null);return{c(){t=b("div"),r&&r.c(),j(t,"class","tabs svelte-5jhylz")},m(e,s){m(e,t,s),r&&r.m(t,null),n=!0},p(e,[t]){r&&r.p&&16&t&&r.p(h(s,e,e[4],null),p(s,e[4],t,null))},i(e){n||(U(r,e),n=!0)},o(e){G(r,e),n=!1},d(e){e&&v(t),r&&r.d(e)}}}const ce={};function de(e,t,n){const s=[],r=[],i=oe(null),l=oe(null);var o,a;o=ce,a={registerTab:e=>{s.push(e),i.update(t=>t||e),B(()=>{const t=s.indexOf(e);s.splice(t,1),i.update(n=>n===e?s[t]||s[s.length-1]:n)})},registerPanel:e=>{r.push(e),l.update(t=>t||e),B(()=>{const t=r.indexOf(e);r.splice(t,1),l.update(n=>n===e?r[t]||r[r.length-1]:n)})},selectTab:e=>{const t=s.indexOf(e);i.set(e),l.set(r[t])},selectedTab:i,selectedPanel:l},q().$$.context.set(o,a);let{$$slots:c={},$$scope:d}=t;return e.$set=e=>{"$$scope"in e&&n(4,d=e.$$scope)},[s,r,i,l,d,c]}var ue=class extends te{constructor(e){var t;super(),document.getElementById("svelte-5jhylz-style")||((t=b("style")).id="svelte-5jhylz-style",t.textContent=".tabs.svelte-5jhylz{background-color:var(--gray-bg);border:solid 1px var(--gray-border);border-radius:var(--border-radius)}",g(document.head,t)),ee(this,e,de,ae,a,{})}};function he(e){let t,n;const s=e[1].default,r=u(s,e,e[0],null);return{c(){t=b("div"),r&&r.c(),j(t,"class","tab-list svelte-1s3nj47")},m(e,s){m(e,t,s),r&&r.m(t,null),n=!0},p(e,[t]){r&&r.p&&1&t&&r.p(h(s,e,e[0],null),p(s,e[0],t,null))},i(e){n||(U(r,e),n=!0)},o(e){G(r,e),n=!1},d(e){e&&v(t),r&&r.d(e)}}}function pe(e,t,n){let{$$slots:s={},$$scope:r}=t;return e.$set=e=>{"$$scope"in e&&n(0,r=e.$$scope)},[r,s]}var fe=class extends te{constructor(e){var t;super(),document.getElementById("svelte-1s3nj47-style")||((t=b("style")).id="svelte-1s3nj47-style",t.textContent=".tab-list.svelte-1s3nj47{border-bottom:1px solid var(--gray-border);display:flex;flex-wrap:wrap}",g(document.head,t)),ee(this,e,pe,he,a,{})}};function ge(e){let t;const n=e[5].default,s=u(n,e,e[4],null);return{c(){s&&s.c()},m(e,n){s&&s.m(e,n),t=!0},p(e,t){s&&s.p&&16&t&&s.p(h(n,e,e[4],null),p(n,e[4],t,null))},i(e){t||(U(s,e),t=!0)},o(e){G(s,e),t=!1},d(e){s&&s.d(e)}}}function me(e){let t,n,s=e[0]===e[1]&&ge(e);return{c(){s&&s.c(),t=w()},m(e,r){s&&s.m(e,r),m(e,t,r),n=!0},p(e,[n]){e[0]===e[1]?s?(s.p(e,n),U(s,1)):(s=ge(e),s.c(),U(s,1),s.m(t.parentNode,t)):s&&(F(),G(s,1,1,()=>{s=null}),J())},i(e){n||(U(s),n=!0)},o(e){G(s),n=!1},d(e){s&&s.d(e),e&&v(t)}}}function ve(e,t,n){let s;const r={},{registerPanel:i,selectedPanel:l}=O(ce);d(e,l,e=>n(0,s=e)),i(r);let{$$slots:o={},$$scope:a}=t;return e.$set=e=>{"$$scope"in e&&n(4,a=e.$$scope)},[s,r,l,i,a,o]}var ye=class extends te{constructor(e){super(),ee(this,e,ve,me,a,{})}};function be(e){let t,n,s;const r=e[6].default,i=u(r,e,e[5],null);return{c(){t=b("button"),i&&i.c(),j(t,"class","svelte-m4f1z5"),E(t,"selected",e[0]===e[1])},m(r,l){m(r,t,l),i&&i.m(t,null),n=!0,s=z(t,"click",e[7])},p(e,[n]){i&&i.p&&32&n&&i.p(h(r,e,e[5],null),p(r,e[5],n,null)),3&n&&E(t,"selected",e[0]===e[1])},i(e){n||(U(i,e),n=!0)},o(e){G(i,e),n=!1},d(e){e&&v(t),i&&i.d(e),s()}}}function xe(e,t,n){let s;const r={},{registerTab:i,selectTab:l,selectedTab:o}=O(ce);d(e,o,e=>n(0,s=e)),i(r);let{$$slots:a={},$$scope:c}=t;return e.$set=e=>{"$$scope"in e&&n(5,c=e.$$scope)},[s,r,l,o,i,c,a,()=>l(r)]}var $e=class extends te{constructor(e){var t;super(),document.getElementById("svelte-m4f1z5-style")||((t=b("style")).id="svelte-m4f1z5-style",t.textContent="button.svelte-m4f1z5{background:none;border:none;border-radius:0;margin:0;color:#bbb;font-size:1em;padding:1em;cursor:pointer;flex:1;border-bottom:3px solid var(--gray-bg)}button.svelte-m4f1z5:focus{outline:0}.selected.svelte-m4f1z5{border-bottom:3px solid var(--orange);color:#333}",g(document.head,t)),ee(this,e,xe,be,a,{})}};function we(e,t,n){const s=e.slice();return s[1]=t[n],s}function ze(e,t,n){const s=e.slice();return s[4]=t[n],s}function je(e,t,n){const s=e.slice();return s[7]=t[n],s}function ke(e){let t,n,s,r=e[7]+"";return{c(){t=b("li"),n=x(r),s=$(),j(t,"class","svelte-ez734h")},m(e,r){m(e,t,r),g(t,n),g(t,s)},p(e,t){1&t&&r!==(r=e[7]+"")&&k(n,r)},d(e){e&&v(t)}}}function Te(e){let t,n,s,r=e[4]+"";return{c(){t=b("li"),n=x(r),s=$(),j(t,"class","svelte-ez734h")},m(e,r){m(e,t,r),g(t,n),g(t,s)},p(e,t){1&t&&r!==(r=e[4]+"")&&k(n,r)},d(e){e&&v(t)}}}function Ce(e){let t,n,s,r,i,l,o,a,c,d,u,h,p,f,y=e[1].title+"",w=e[1].description+"";return{c(){t=b("div"),n=b("a"),s=b("img"),l=$(),o=b("div"),a=b("a"),c=x(y),u=$(),h=b("div"),p=x(w),f=$(),s.src!==(r="images/application-tabs/"+e[1].image)&&j(s,"src",r),j(s,"class","svelte-ez734h"),j(n,"href",i=e[1].url),j(n,"class","svelte-ez734h"),j(a,"href",d=e[1].url),j(o,"class","example-title svelte-ez734h"),j(h,"class","example-description svelte-ez734h"),j(t,"class","example svelte-ez734h")},m(e,r){m(e,t,r),g(t,n),g(n,s),g(t,l),g(t,o),g(o,a),g(a,c),g(t,u),g(t,h),g(h,p),g(t,f)},p(e,t){1&t&&s.src!==(r="images/application-tabs/"+e[1].image)&&j(s,"src",r),1&t&&i!==(i=e[1].url)&&j(n,"href",i),1&t&&y!==(y=e[1].title+"")&&k(c,y),1&t&&d!==(d=e[1].url)&&j(a,"href",d),1&t&&w!==(w=e[1].description+"")&&k(p,w)},d(e){e&&v(t)}}}function Ee(e){let t,n,r,i,l,o,a,c,d,u,h,p,f,w,z,T,C,E,I,_,q,B,O,A,P=e[0].title+"",L=e[0].description+"",M=e[0].opportunities,S=[];for(let t=0;t<M.length;t+=1)S[t]=ke(je(e,M,t));let D=e[0].challenges,R=[];for(let t=0;t<D.length;t+=1)R[t]=Te(ze(e,D,t));let N=e[0].examples,H=[];for(let t=0;t<N.length;t+=1)H[t]=Ce(we(e,N,t));return{c(){t=b("div"),n=b("div"),r=b("h3"),i=x(P),l=$(),o=b("div"),a=x(L),c=$(),d=b("div"),u=b("div"),h=b("h4"),h.textContent="Opportunities",p=$(),f=b("ul");for(let e=0;e<S.length;e+=1)S[e].c();w=$(),z=b("br"),T=$(),C=b("div"),E=b("h4"),E.textContent="Challenges",I=$(),_=b("ul");for(let e=0;e<R.length;e+=1)R[e].c();q=$(),B=b("br"),O=$(),A=b("div");for(let e=0;e<H.length;e+=1)H[e].c();j(r,"class","application-title svelte-ez734h"),j(o,"class","application-description"),j(n,"class","left svelte-ez734h"),j(h,"class","opportunities-title svelte-ez734h"),j(f,"class","svelte-ez734h"),j(u,"class","application-opportunities svelte-ez734h"),j(E,"class","challenges-title svelte-ez734h"),j(_,"class","svelte-ez734h"),j(C,"class","application-challenges svelte-ez734h"),j(d,"class","right svelte-ez734h"),j(A,"class","bottom svelte-ez734h"),j(t,"class","application svelte-ez734h")},m(e,s){m(e,t,s),g(t,n),g(n,r),g(r,i),g(n,l),g(n,o),g(o,a),g(t,c),g(t,d),g(d,u),g(u,h),g(u,p),g(u,f);for(let e=0;e<S.length;e+=1)S[e].m(f,null);g(d,w),g(d,z),g(d,T),g(d,C),g(C,E),g(C,I),g(C,_);for(let e=0;e<R.length;e+=1)R[e].m(_,null);g(t,q),g(t,B),g(t,O),g(t,A);for(let e=0;e<H.length;e+=1)H[e].m(A,null)},p(e,[t]){if(1&t&&P!==(P=e[0].title+"")&&k(i,P),1&t&&L!==(L=e[0].description+"")&&k(a,L),1&t){let n;for(M=e[0].opportunities,n=0;n<M.length;n+=1){const s=je(e,M,n);S[n]?S[n].p(s,t):(S[n]=ke(s),S[n].c(),S[n].m(f,null))}for(;n<S.length;n+=1)S[n].d(1);S.length=M.length}if(1&t){let n;for(D=e[0].challenges,n=0;n<D.length;n+=1){const s=ze(e,D,n);R[n]?R[n].p(s,t):(R[n]=Te(s),R[n].c(),R[n].m(_,null))}for(;n<R.length;n+=1)R[n].d(1);R.length=D.length}if(1&t){let n;for(N=e[0].examples,n=0;n<N.length;n+=1){const s=we(e,N,n);H[n]?H[n].p(s,t):(H[n]=Ce(s),H[n].c(),H[n].m(A,null))}for(;n<H.length;n+=1)H[n].d(1);H.length=N.length}},i:s,o:s,d(e){e&&v(t),y(S,e),y(R,e),y(H,e)}}}function Ie(e,t,n){let{applicationData:s}=t;return e.$set=e=>{"applicationData"in e&&n(0,s=e.applicationData)},[s]}var _e=class extends te{constructor(e){var t;super(),document.getElementById("svelte-ez734h-style")||((t=b("style")).id="svelte-ez734h-style",t.textContent=".application.svelte-ez734h.svelte-ez734h{padding:1.5em;display:grid;grid-template-columns:repeat(8, 1fr);grid-column-gap:2em}.left.svelte-ez734h.svelte-ez734h{grid-column-start:1;grid-column-end:6}.right.svelte-ez734h.svelte-ez734h{grid-column-start:6;grid-column-end:9}.bottom.svelte-ez734h.svelte-ez734h{grid-column-start:1;grid-column-end:9;display:grid;grid-template-columns:repeat(3, 1fr);grid-column-gap:1.5em}.application-title.svelte-ez734h.svelte-ez734h{margin-top:0}.application-opportunities.svelte-ez734h.svelte-ez734h,.application-challenges.svelte-ez734h.svelte-ez734h{grid-column-start:6;grid-column-end:9}.opportunities-title.svelte-ez734h.svelte-ez734h,.challenges-title.svelte-ez734h.svelte-ez734h{margin-top:0;margin-bottom:1em}.example-title.svelte-ez734h.svelte-ez734h{margin-bottom:0.5em}ul.svelte-ez734h.svelte-ez734h{line-height:1.2em}li.svelte-ez734h.svelte-ez734h{margin-bottom:0.8em}.example-description.svelte-ez734h.svelte-ez734h{font-size:0.8em;line-height:1.4em;color:var(--gray)}img.svelte-ez734h.svelte-ez734h{width:100%;border:1px solid var(--gray-border)\n\t}.example.svelte-ez734h>a.svelte-ez734h{border-bottom:none}",g(document.head,t)),ee(this,e,Ie,Ee,a,{applicationData:0})}},qe=n(0);function Be(e,t,n){const s=e.slice();return s[0]=t[n],s}function Oe(e,t,n){const s=e.slice();return s[0]=t[n],s}function Ae(e){let t,n,r=e[0].title+"";return{c(){t=x(r),n=$()},m(e,s){m(e,t,s),m(e,n,s)},p:s,d(e){e&&v(t),e&&v(n)}}}function Pe(e){let t;const n=new $e({props:{$$slots:{default:[Ae]},$$scope:{ctx:e}}});return{c(){X(n.$$.fragment)},m(e,s){Q(n,e,s),t=!0},p(e,t){const s={};32&t&&(s.$$scope={dirty:t,ctx:e}),n.$set(s)},i(e){t||(U(n.$$.fragment,e),t=!0)},o(e){G(n.$$.fragment,e),t=!1},d(e){Z(n,e)}}}function Le(e){let t,n,s=qe,r=[];for(let t=0;t<s.length;t+=1)r[t]=Pe(Oe(e,s,t));const i=e=>G(r[e],1,1,()=>{r[e]=null});return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=w()},m(e,s){for(let t=0;t<r.length;t+=1)r[t].m(e,s);m(e,t,s),n=!0},p(e,n){if(0&n){let l;for(s=qe,l=0;l<s.length;l+=1){const i=Oe(e,s,l);r[l]?(r[l].p(i,n),U(r[l],1)):(r[l]=Pe(i),r[l].c(),U(r[l],1),r[l].m(t.parentNode,t))}for(F(),l=s.length;l<r.length;l+=1)i(l);J()}},i(e){if(!n){for(let e=0;e<s.length;e+=1)U(r[e]);n=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)G(r[e]);n=!1},d(e){y(r,e),e&&v(t)}}}function Me(e){let t,n;const r=new _e({props:{applicationData:e[0]}});return{c(){X(r.$$.fragment),t=$()},m(e,s){Q(r,e,s),m(e,t,s),n=!0},p:s,i(e){n||(U(r.$$.fragment,e),n=!0)},o(e){G(r.$$.fragment,e),n=!1},d(e){Z(r,e),e&&v(t)}}}function Se(e){let t;const n=new ye({props:{$$slots:{default:[Me]},$$scope:{ctx:e}}});return{c(){X(n.$$.fragment)},m(e,s){Q(n,e,s),t=!0},p(e,t){const s={};32&t&&(s.$$scope={dirty:t,ctx:e}),n.$set(s)},i(e){t||(U(n.$$.fragment,e),t=!0)},o(e){G(n.$$.fragment,e),t=!1},d(e){Z(n,e)}}}function De(e){let t,n,s;const r=new fe({props:{$$slots:{default:[Le]},$$scope:{ctx:e}}});let i=qe,l=[];for(let t=0;t<i.length;t+=1)l[t]=Se(Be(e,i,t));const o=e=>G(l[e],1,1,()=>{l[e]=null});return{c(){X(r.$$.fragment),t=$();for(let e=0;e<l.length;e+=1)l[e].c();n=w()},m(e,i){Q(r,e,i),m(e,t,i);for(let t=0;t<l.length;t+=1)l[t].m(e,i);m(e,n,i),s=!0},p(e,t){const s={};if(32&t&&(s.$$scope={dirty:t,ctx:e}),r.$set(s),0&t){let s;for(i=qe,s=0;s<i.length;s+=1){const r=Be(e,i,s);l[s]?(l[s].p(r,t),U(l[s],1)):(l[s]=Se(r),l[s].c(),U(l[s],1),l[s].m(n.parentNode,n))}for(F(),s=i.length;s<l.length;s+=1)o(s);J()}},i(e){if(!s){U(r.$$.fragment,e);for(let e=0;e<i.length;e+=1)U(l[e]);s=!0}},o(e){G(r.$$.fragment,e),l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)G(l[e]);s=!1},d(e){Z(r,e),e&&v(t),y(l,e),e&&v(n)}}}function Re(e){let t;const n=new ue({props:{$$slots:{default:[De]},$$scope:{ctx:e}}});return{c(){X(n.$$.fragment)},m(e,s){Q(n,e,s),t=!0},p(e,[t]){const s={};32&t&&(s.$$scope={dirty:t,ctx:e}),n.$set(s)},i(e){t||(U(n.$$.fragment,e),t=!0)},o(e){G(n.$$.fragment,e),t=!1},d(e){Z(n,e)}}}var Ne=class extends te{constructor(e){super(),ee(this,e,null,Re,a,{})}};function He(e,t,n){const s=e.slice();return s[9]=t[n],s[11]=n,s}function Ke(e){let t,n,s,r;function i(...t){return e[8](e[11],...t)}return{c(){t=b("img"),t.src!==(n="images/horse/"+e[9]+".jpg")&&j(t,"src",n),j(t,"alt","Horse running."),j(t,"class",s=f(e[9]===e[0]?"frame active-frame":"frame")+" svelte-ddjnd7")},m(e,n){m(e,t,n),r=z(t,"mouseover",i)},p(n,r){e=n,1&r&&s!==(s=f(e[9]===e[0]?"frame active-frame":"frame")+" svelte-ddjnd7")&&j(t,"class",s)},d(e){e&&v(t),r()}}}function We(e){let t,n,r,i,a,c,d,u,h,p,f,w,E,I,_,q,B,O,A,P=e[1]?"pause_circle_outline":"play_circle_outline",L=e[2],M=[];for(let t=0;t<L.length;t+=1)M[t]=Ke(He(e,L,t));return{c(){t=b("div"),n=b("div"),r=b("img"),a=$(),c=b("div"),d=b("figcaption"),d.innerHTML="\n                In 1878, Eadweard Muybridge settled Leland Stanford&#39;s hotly debated question of whether all four feet of a horse lifted off the ground during a trot using multiple cameras to capture motion in stop-motion photographs.\n                This interactive graphic uses <i>animation</i> and <i>multiple representations</i> to illustrate this finding.\n             ",u=$(),h=b("div"),p=b("label"),f=b("input"),w=$(),E=b("div"),I=b("button"),_=b("i"),q=x(P),B=$(),O=b("div");for(let e=0;e<M.length;e+=1)M[e].c();j(r,"id","horse"),r.src!==(i="images/horse/"+e[0]+".jpg")&&j(r,"src",i),j(r,"alt","Horse running."),j(r,"class","svelte-ddjnd7"),j(f,"type","range"),j(f,"min","1"),j(f,"max","11"),j(f,"class","slider svelte-ddjnd7"),C(h,"padding-bottom","5px"),j(_,"class","material-icons"),C(_,"font-size","48px"),j(I,"class","svelte-ddjnd7"),j(c,"id","horse-controls"),j(c,"class","svelte-ddjnd7"),j(n,"id","horse-wrapper"),j(n,"class","svelte-ddjnd7"),j(O,"id","frames"),j(O,"class","svelte-ddjnd7"),j(t,"id","wrapper"),j(t,"class","svelte-ddjnd7")},m(s,i){m(s,t,i),g(t,n),g(n,r),g(n,a),g(n,c),g(c,d),g(c,u),g(c,h),g(h,p),g(p,f),T(f,e[0]),g(c,w),g(c,E),g(E,I),g(I,_),g(_,q),g(t,B),g(t,O);for(let e=0;e<M.length;e+=1)M[e].m(O,null);A=[z(f,"change",e[7]),z(f,"input",e[7]),z(f,"mousedown",e[4]),z(I,"click",(function(){o(e[1]?e[4]:e[3])&&(e[1]?e[4]:e[3]).apply(this,arguments)}))]},p(t,[n]){if(e=t,1&n&&r.src!==(i="images/horse/"+e[0]+".jpg")&&j(r,"src",i),1&n&&T(f,e[0]),2&n&&P!==(P=e[1]?"pause_circle_outline":"play_circle_outline")&&k(q,P),37&n){let t;for(L=e[2],t=0;t<L.length;t+=1){const s=He(e,L,t);M[t]?M[t].p(s,n):(M[t]=Ke(s),M[t].c(),M[t].m(O,null))}for(;t<M.length;t+=1)M[t].d(1);M.length=L.length}},i:s,o:s,d(e){e&&v(t),y(M,e),l(A)}}}function Ye(e,t,n){let s=1,r=!1;const i=Array.from(new Array(11),(e,t)=>t+1);let l;function o(){r||(n(1,r=!0),l=setInterval(()=>{n(0,s%=11),n(0,s+=1)},100))}function a(){n(1,r=!1),clearInterval(l)}function c(e){a(),n(0,s=e)}o();return[s,r,i,o,a,c,l,function(){var e;e=this.value,s=""===e?void 0:+e,n(0,s)},e=>c(e+1)]}var Fe=class extends te{constructor(e){var t;super(),document.getElementById("svelte-ddjnd7-style")||((t=b("style")).id="svelte-ddjnd7-style",t.textContent="#wrapper.svelte-ddjnd7{margin-top:1.5em;margin-bottom:1.5em}#frames.svelte-ddjnd7{display:grid;grid-template-columns:repeat(11, 1fr);grid-column-gap:0.2em;padding-top:10px}.frame.svelte-ddjnd7{width:100%;filter:brightness(60%);cursor:crosshair}.active-frame.svelte-ddjnd7{border-bottom:3px solid var(--orange);padding-bottom:2px;filter:brightness(100%)}#horse-wrapper.svelte-ddjnd7{display:grid;grid-template-columns:repeat(12, 1fr);grid-column-gap:2em}#horse.svelte-ddjnd7{grid-column-start:1;grid-column-end:7;width:100%}#horse-controls.svelte-ddjnd7{grid-column-start:7;grid-column-end:11;display:flex;flex-direction:column;justify-content:center;text-align:left}.slider.svelte-ddjnd7{-webkit-appearance:none;appearance:none;outline:none;opacity:0.7;-webkit-transition:.2s;transition:opacity .2s;height:3px;border-radius:2px;background-color:hsla(0, 0%, 0%, 0.2)}.slider.svelte-ddjnd7:hover{opacity:1}.slider.svelte-ddjnd7::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;cursor:pointer;top:-6px;left:-6px;width:13px;height:13px;background-color:var(--orange);border-radius:50%}.slider.svelte-ddjnd7::-moz-range-thumb{top:-6px;left:-6px;width:13px;height:13px;background-color:var(--orange);cursor:pointer}button.svelte-ddjnd7{border:none;padding:0;cursor:pointer;outline:inherit;color:var(--orange)}",g(document.head,t)),ee(this,e,Ye,We,a,{})}};function Je(e){let t;return{c(){t=b("div"),t.textContent="asdf",j(t,"id","gutter-t"),j(t,"class","svelte-18ibyfr")},m(e,n){m(e,t,n)},p:s,i:s,o:s,d(e){e&&v(t)}}}var Ue=class extends te{constructor(e){var t;super(),document.getElementById("svelte-18ibyfr-style")||((t=b("style")).id="svelte-18ibyfr-style",t.textContent="#gutter-t.svelte-18ibyfr{color:red}#gutter-test{grid-column-start:2;grid-column-end:4}",g(document.head,t)),ee(this,e,null,Je,a,{})}};new se({target:document.getElementById("research-x-practice")}),new ie({target:document.getElementById("contents")}),new Ne({target:document.getElementById("applications-tab")}),new Ue({target:document.getElementById("gutter-test")}),new Fe({target:document.getElementById("horse")})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N2ZWx0ZS9pbnRlcm5hbC9pbmRleC5tanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N2ZWx0ZS9zdG9yZS9pbmRleC5tanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RpYWdyYW1zL2FwcGxpY2F0aW9uLXRhYnMvdGFicy9UYWJzLnN2ZWx0ZSIsIndlYnBhY2s6Ly8vLi9zcmMvZGlhZ3JhbXMvYXBwbGljYXRpb24tdGFicy90YWJzL1RhYlBhbmVsLnN2ZWx0ZSIsIndlYnBhY2s6Ly8vLi9zcmMvZGlhZ3JhbXMvYXBwbGljYXRpb24tdGFicy90YWJzL1RhYi5zdmVsdGUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RpYWdyYW1zL2FwcGxpY2F0aW9uLXRhYnMvYXBwbGljYXRpb24uc3ZlbHRlIiwid2VicGFjazovLy8uL3NyYy9kaWFncmFtcy9hcHBsaWNhdGlvbi10YWJzL2FwcGxpY2F0aW9uLXRhYnMuc3ZlbHRlIiwid2VicGFjazovLy8uL3NyYy9kaWFncmFtcy9ob3JzZS5zdmVsdGUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwibm9vcCIsImZuIiwiYmxhbmtfb2JqZWN0IiwicnVuX2FsbCIsImZucyIsImZvckVhY2giLCJpc19mdW5jdGlvbiIsInRoaW5nIiwic2FmZV9ub3RfZXF1YWwiLCJhIiwiYiIsInN0b3JlIiwiY2FsbGJhY2siLCJ1bnN1YiIsInN1YnNjcmliZSIsInVuc3Vic2NyaWJlIiwiY29tcG9uZW50X3N1YnNjcmliZSIsImNvbXBvbmVudCIsIiQkIiwib25fZGVzdHJveSIsInB1c2giLCJjcmVhdGVfc2xvdCIsImRlZmluaXRpb24iLCJjdHgiLCIkJHNjb3BlIiwic2xvdF9jdHgiLCJnZXRfc2xvdF9jb250ZXh0IiwidGFyIiwic3JjIiwiayIsInNsaWNlIiwiZ2V0X3Nsb3RfY2hhbmdlcyIsImRpcnR5IiwibGV0cyIsIm1lcmdlZCIsImxlbiIsIk1hdGgiLCJtYXgiLCJsZW5ndGgiLCJudWxsX3RvX2VtcHR5IiwiU2V0IiwiYXBwZW5kIiwidGFyZ2V0Iiwibm9kZSIsImFwcGVuZENoaWxkIiwiaW5zZXJ0IiwiYW5jaG9yIiwiaW5zZXJ0QmVmb3JlIiwiZGV0YWNoIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiZGVzdHJveV9lYWNoIiwiaXRlcmF0aW9ucyIsImRldGFjaGluZyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImRhdGEiLCJjcmVhdGVUZXh0Tm9kZSIsInNwYWNlIiwiZW1wdHkiLCJsaXN0ZW4iLCJldmVudCIsImhhbmRsZXIiLCJvcHRpb25zIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhdHRyIiwiYXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiZ2V0QXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwic2V0X2RhdGEiLCJ0ZXh0Iiwic2V0X2lucHV0X3ZhbHVlIiwiaW5wdXQiLCJzZXRfc3R5bGUiLCJpbXBvcnRhbnQiLCJzdHlsZSIsInNldFByb3BlcnR5IiwidG9nZ2xlX2NsYXNzIiwiZWxlbWVudCIsInRvZ2dsZSIsImNsYXNzTGlzdCIsImN1cnJlbnRfY29tcG9uZW50Iiwic2V0X2N1cnJlbnRfY29tcG9uZW50IiwiZ2V0X2N1cnJlbnRfY29tcG9uZW50IiwiRXJyb3IiLCJvbkRlc3Ryb3kiLCJnZXRDb250ZXh0IiwiY29udGV4dCIsImRpcnR5X2NvbXBvbmVudHMiLCJiaW5kaW5nX2NhbGxiYWNrcyIsInJlbmRlcl9jYWxsYmFja3MiLCJmbHVzaF9jYWxsYmFja3MiLCJyZXNvbHZlZF9wcm9taXNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ1cGRhdGVfc2NoZWR1bGVkIiwic2NoZWR1bGVfdXBkYXRlIiwidGhlbiIsImZsdXNoIiwiYWRkX3JlbmRlcl9jYWxsYmFjayIsInNlZW5fY2FsbGJhY2tzIiwic2hpZnQiLCJwb3AiLCJoYXMiLCJhZGQiLCJmcmFnbWVudCIsInVwZGF0ZSIsImJlZm9yZV91cGRhdGUiLCJhZnRlcl91cGRhdGUiLCJvdXRyb2luZyIsIm91dHJvcyIsImdyb3VwX291dHJvcyIsImNoZWNrX291dHJvcyIsInRyYW5zaXRpb25faW4iLCJibG9jayIsImxvY2FsIiwiZGVsZXRlIiwidHJhbnNpdGlvbl9vdXQiLCJ3aW5kb3ciLCJnbG9iYWwiLCJTdmVsdGVFbGVtZW50IiwiY3JlYXRlX2NvbXBvbmVudCIsIm1vdW50X2NvbXBvbmVudCIsIm9uX21vdW50IiwibmV3X29uX2Rlc3Ryb3kiLCJtYXAiLCJmaWx0ZXIiLCJkZXN0cm95X2NvbXBvbmVudCIsImluaXQiLCJpbnN0YW5jZSIsImNyZWF0ZV9mcmFnbWVudCIsIm5vdF9lcXVhbCIsInByb3BzIiwicGFyZW50X2NvbXBvbmVudCIsInByb3BfdmFsdWVzIiwiYm91bmQiLCJNYXAiLCJjYWxsYmFja3MiLCJyZWFkeSIsInJldCIsInJlc3QiLCJmaWxsIiwibWFrZV9kaXJ0eSIsImh5ZHJhdGUiLCJBcnJheSIsImZyb20iLCJjaGlsZE5vZGVzIiwiaW50cm8iLCJIVE1MRWxlbWVudCIsInN1cGVyIiwidGhpcyIsImF0dGFjaFNoYWRvdyIsInNsb3R0ZWQiLCJfb2xkVmFsdWUiLCJuZXdWYWx1ZSIsIiRkZXN0cm95IiwidHlwZSIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsIlN2ZWx0ZUNvbXBvbmVudCIsInN1YnNjcmliZXJfcXVldWUiLCJ3cml0YWJsZSIsInN0YXJ0Iiwic3RvcCIsInN1YnNjcmliZXJzIiwic2V0IiwibmV3X3ZhbHVlIiwicnVuX3F1ZXVlIiwicnVuIiwiaW52YWxpZGF0ZSIsInN1YnNjcmliZXIiLCJUQUJTIiwicGFuZWwiLCJyZWdpc3RlclBhbmVsIiwic2VsZWN0ZWRQYW5lbCIsInRhYiIsInJlZ2lzdGVyVGFiIiwic2VsZWN0VGFiIiwic2VsZWN0ZWRUYWIiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiaW1hZ2UiLCJ1cmwiLCJvcHBvcnR1bml0aWVzIiwiY2hhbGxlbmdlcyIsImV4YW1wbGVzIiwiYXBwbGljYXRpb25EYXRhIiwiZnJhbWVOdW1iZXIiLCJpc1BsYXlpbmciLCJmcmFtZUludEFycmF5IiwieCIsInBsYXlJbnRlcnZhbCIsInBsYXkiLCJzZXRJbnRlcnZhbCIsInBhdXNlIiwiY2xlYXJJbnRlcnZhbCIsImNoYW5nZUZyYW1lIiwidW5kZWZpbmVkIiwiUmVzZWFyY2hQcmFjdGljZVRhYmxlIiwiZ2V0RWxlbWVudEJ5SWQiLCJUT0MiLCJBcHBsaWNhdGlvblRhYnMiLCJHdXR0ZXJUZXN0IiwiSG9yc2UiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1Ms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QWVFLFksU0FDUE4sR0FUSSxJLElBVUpBLEdBQWUsSUFDaEIsTSxTQUlOTyxJLElBQ0xOLEdBQVksR0FDWk8sY0FBY0osRyxTQUdUSyxFQUFZdk8sR0FDakJxTyxJLElBQ0FQLEVBQWM5TixHQUdsQm1PLEksZ0NQZ1BKLElBQW1CbE4sSU81SDBDLFdBQVg2TSxFUDZIN0IsS0FBVjdNLE9BQWV1TixHQUFhdk4sRSxXT25INEhzTixFQUFZdk8sRUFBRSxJLG83REN6SW5KLElBQUl5TyxHQUFzQixDQUN2RC9KLE9BQVFZLFNBQVNvSixlQUFlLHlCQUdyQixJQUFJQyxHQUFJLENBQ25CakssT0FBUVksU0FBU29KLGVBQWUsY0FHVCxJQUFJRSxHQUFnQixDQUMzQ2xLLE9BQVFZLFNBQVNvSixlQUFlLHNCQUdkLElBQUlHLEdBQVcsQ0FDakNuSyxPQUFRWSxTQUFTb0osZUFBZSxpQkFHbkIsSUFBSUksR0FBTSxDQUN2QnBLLE9BQVFZLFNBQVNvSixlQUFlIiwiZmlsZSI6ImluZGV4LmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbiIsImZ1bmN0aW9uIG5vb3AoKSB7IH1cbmNvbnN0IGlkZW50aXR5ID0geCA9PiB4O1xuZnVuY3Rpb24gYXNzaWduKHRhciwgc3JjKSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGZvciAoY29uc3QgayBpbiBzcmMpXG4gICAgICAgIHRhcltrXSA9IHNyY1trXTtcbiAgICByZXR1cm4gdGFyO1xufVxuZnVuY3Rpb24gaXNfcHJvbWlzZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nO1xufVxuZnVuY3Rpb24gYWRkX2xvY2F0aW9uKGVsZW1lbnQsIGZpbGUsIGxpbmUsIGNvbHVtbiwgY2hhcikge1xuICAgIGVsZW1lbnQuX19zdmVsdGVfbWV0YSA9IHtcbiAgICAgICAgbG9jOiB7IGZpbGUsIGxpbmUsIGNvbHVtbiwgY2hhciB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHJ1bihmbikge1xuICAgIHJldHVybiBmbigpO1xufVxuZnVuY3Rpb24gYmxhbmtfb2JqZWN0KCkge1xuICAgIHJldHVybiBPYmplY3QuY3JlYXRlKG51bGwpO1xufVxuZnVuY3Rpb24gcnVuX2FsbChmbnMpIHtcbiAgICBmbnMuZm9yRWFjaChydW4pO1xufVxuZnVuY3Rpb24gaXNfZnVuY3Rpb24odGhpbmcpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRoaW5nID09PSAnZnVuY3Rpb24nO1xufVxuZnVuY3Rpb24gc2FmZV9ub3RfZXF1YWwoYSwgYikge1xuICAgIHJldHVybiBhICE9IGEgPyBiID09IGIgOiBhICE9PSBiIHx8ICgoYSAmJiB0eXBlb2YgYSA9PT0gJ29iamVjdCcpIHx8IHR5cGVvZiBhID09PSAnZnVuY3Rpb24nKTtcbn1cbmZ1bmN0aW9uIG5vdF9lcXVhbChhLCBiKSB7XG4gICAgcmV0dXJuIGEgIT0gYSA/IGIgPT0gYiA6IGEgIT09IGI7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZV9zdG9yZShzdG9yZSwgbmFtZSkge1xuICAgIGlmICghc3RvcmUgfHwgdHlwZW9mIHN0b3JlLnN1YnNjcmliZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCcke25hbWV9JyBpcyBub3QgYSBzdG9yZSB3aXRoIGEgJ3N1YnNjcmliZScgbWV0aG9kYCk7XG4gICAgfVxufVxuZnVuY3Rpb24gc3Vic2NyaWJlKHN0b3JlLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IHVuc3ViID0gc3RvcmUuc3Vic2NyaWJlKGNhbGxiYWNrKTtcbiAgICByZXR1cm4gdW5zdWIudW5zdWJzY3JpYmUgPyAoKSA9PiB1bnN1Yi51bnN1YnNjcmliZSgpIDogdW5zdWI7XG59XG5mdW5jdGlvbiBnZXRfc3RvcmVfdmFsdWUoc3RvcmUpIHtcbiAgICBsZXQgdmFsdWU7XG4gICAgc3Vic2NyaWJlKHN0b3JlLCBfID0+IHZhbHVlID0gXykoKTtcbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiBjb21wb25lbnRfc3Vic2NyaWJlKGNvbXBvbmVudCwgc3RvcmUsIGNhbGxiYWNrKSB7XG4gICAgY29tcG9uZW50LiQkLm9uX2Rlc3Ryb3kucHVzaChzdWJzY3JpYmUoc3RvcmUsIGNhbGxiYWNrKSk7XG59XG5mdW5jdGlvbiBjcmVhdGVfc2xvdChkZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGZuKSB7XG4gICAgaWYgKGRlZmluaXRpb24pIHtcbiAgICAgICAgY29uc3Qgc2xvdF9jdHggPSBnZXRfc2xvdF9jb250ZXh0KGRlZmluaXRpb24sIGN0eCwgJCRzY29wZSwgZm4pO1xuICAgICAgICByZXR1cm4gZGVmaW5pdGlvblswXShzbG90X2N0eCk7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0X3Nsb3RfY29udGV4dChkZWZpbml0aW9uLCBjdHgsICQkc2NvcGUsIGZuKSB7XG4gICAgcmV0dXJuIGRlZmluaXRpb25bMV0gJiYgZm5cbiAgICAgICAgPyBhc3NpZ24oJCRzY29wZS5jdHguc2xpY2UoKSwgZGVmaW5pdGlvblsxXShmbihjdHgpKSlcbiAgICAgICAgOiAkJHNjb3BlLmN0eDtcbn1cbmZ1bmN0aW9uIGdldF9zbG90X2NoYW5nZXMoZGVmaW5pdGlvbiwgJCRzY29wZSwgZGlydHksIGZuKSB7XG4gICAgaWYgKGRlZmluaXRpb25bMl0gJiYgZm4pIHtcbiAgICAgICAgY29uc3QgbGV0cyA9IGRlZmluaXRpb25bMl0oZm4oZGlydHkpKTtcbiAgICAgICAgaWYgKHR5cGVvZiAkJHNjb3BlLmRpcnR5ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gW107XG4gICAgICAgICAgICBjb25zdCBsZW4gPSBNYXRoLm1heCgkJHNjb3BlLmRpcnR5Lmxlbmd0aCwgbGV0cy5sZW5ndGgpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIG1lcmdlZFtpXSA9ICQkc2NvcGUuZGlydHlbaV0gfCBsZXRzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lcmdlZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJCRzY29wZS5kaXJ0eSB8IGxldHM7XG4gICAgfVxuICAgIHJldHVybiAkJHNjb3BlLmRpcnR5O1xufVxuZnVuY3Rpb24gZXhjbHVkZV9pbnRlcm5hbF9wcm9wcyhwcm9wcykge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAoY29uc3QgayBpbiBwcm9wcylcbiAgICAgICAgaWYgKGtbMF0gIT09ICckJylcbiAgICAgICAgICAgIHJlc3VsdFtrXSA9IHByb3BzW2tdO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBvbmNlKGZuKSB7XG4gICAgbGV0IHJhbiA9IGZhbHNlO1xuICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICBpZiAocmFuKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICByYW4gPSB0cnVlO1xuICAgICAgICBmbi5jYWxsKHRoaXMsIC4uLmFyZ3MpO1xuICAgIH07XG59XG5mdW5jdGlvbiBudWxsX3RvX2VtcHR5KHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6IHZhbHVlO1xufVxuZnVuY3Rpb24gc2V0X3N0b3JlX3ZhbHVlKHN0b3JlLCByZXQsIHZhbHVlID0gcmV0KSB7XG4gICAgc3RvcmUuc2V0KHZhbHVlKTtcbiAgICByZXR1cm4gcmV0O1xufVxuY29uc3QgaGFzX3Byb3AgPSAob2JqLCBwcm9wKSA9PiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTtcbmZ1bmN0aW9uIGFjdGlvbl9kZXN0cm95ZXIoYWN0aW9uX3Jlc3VsdCkge1xuICAgIHJldHVybiBhY3Rpb25fcmVzdWx0ICYmIGlzX2Z1bmN0aW9uKGFjdGlvbl9yZXN1bHQuZGVzdHJveSkgPyBhY3Rpb25fcmVzdWx0LmRlc3Ryb3kgOiBub29wO1xufVxuXG5jb25zdCBpc19jbGllbnQgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJztcbmxldCBub3cgPSBpc19jbGllbnRcbiAgICA/ICgpID0+IHdpbmRvdy5wZXJmb3JtYW5jZS5ub3coKVxuICAgIDogKCkgPT4gRGF0ZS5ub3coKTtcbmxldCByYWYgPSBpc19jbGllbnQgPyBjYiA9PiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2IpIDogbm9vcDtcbi8vIHVzZWQgaW50ZXJuYWxseSBmb3IgdGVzdGluZ1xuZnVuY3Rpb24gc2V0X25vdyhmbikge1xuICAgIG5vdyA9IGZuO1xufVxuZnVuY3Rpb24gc2V0X3JhZihmbikge1xuICAgIHJhZiA9IGZuO1xufVxuXG5jb25zdCB0YXNrcyA9IG5ldyBTZXQoKTtcbmZ1bmN0aW9uIHJ1bl90YXNrcyhub3cpIHtcbiAgICB0YXNrcy5mb3JFYWNoKHRhc2sgPT4ge1xuICAgICAgICBpZiAoIXRhc2suYyhub3cpKSB7XG4gICAgICAgICAgICB0YXNrcy5kZWxldGUodGFzayk7XG4gICAgICAgICAgICB0YXNrLmYoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmICh0YXNrcy5zaXplICE9PSAwKVxuICAgICAgICByYWYocnVuX3Rhc2tzKTtcbn1cbi8qKlxuICogRm9yIHRlc3RpbmcgcHVycG9zZXMgb25seSFcbiAqL1xuZnVuY3Rpb24gY2xlYXJfbG9vcHMoKSB7XG4gICAgdGFza3MuY2xlYXIoKTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB0YXNrIHRoYXQgcnVucyBvbiBlYWNoIHJhZiBmcmFtZVxuICogdW50aWwgaXQgcmV0dXJucyBhIGZhbHN5IHZhbHVlIG9yIGlzIGFib3J0ZWRcbiAqL1xuZnVuY3Rpb24gbG9vcChjYWxsYmFjaykge1xuICAgIGxldCB0YXNrO1xuICAgIGlmICh0YXNrcy5zaXplID09PSAwKVxuICAgICAgICByYWYocnVuX3Rhc2tzKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBwcm9taXNlOiBuZXcgUHJvbWlzZShmdWxmaWxsID0+IHtcbiAgICAgICAgICAgIHRhc2tzLmFkZCh0YXNrID0geyBjOiBjYWxsYmFjaywgZjogZnVsZmlsbCB9KTtcbiAgICAgICAgfSksXG4gICAgICAgIGFib3J0KCkge1xuICAgICAgICAgICAgdGFza3MuZGVsZXRlKHRhc2spO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gYXBwZW5kKHRhcmdldCwgbm9kZSkge1xuICAgIHRhcmdldC5hcHBlbmRDaGlsZChub2RlKTtcbn1cbmZ1bmN0aW9uIGluc2VydCh0YXJnZXQsIG5vZGUsIGFuY2hvcikge1xuICAgIHRhcmdldC5pbnNlcnRCZWZvcmUobm9kZSwgYW5jaG9yIHx8IG51bGwpO1xufVxuZnVuY3Rpb24gZGV0YWNoKG5vZGUpIHtcbiAgICBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSk7XG59XG5mdW5jdGlvbiBkZXN0cm95X2VhY2goaXRlcmF0aW9ucywgZGV0YWNoaW5nKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVyYXRpb25zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGlmIChpdGVyYXRpb25zW2ldKVxuICAgICAgICAgICAgaXRlcmF0aW9uc1tpXS5kKGRldGFjaGluZyk7XG4gICAgfVxufVxuZnVuY3Rpb24gZWxlbWVudChuYW1lKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobmFtZSk7XG59XG5mdW5jdGlvbiBlbGVtZW50X2lzKG5hbWUsIGlzKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobmFtZSwgeyBpcyB9KTtcbn1cbmZ1bmN0aW9uIG9iamVjdF93aXRob3V0X3Byb3BlcnRpZXMob2JqLCBleGNsdWRlKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0ge307XG4gICAgZm9yIChjb25zdCBrIGluIG9iaikge1xuICAgICAgICBpZiAoaGFzX3Byb3Aob2JqLCBrKVxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgJiYgZXhjbHVkZS5pbmRleE9mKGspID09PSAtMSkge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgdGFyZ2V0W2tdID0gb2JqW2tdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG59XG5mdW5jdGlvbiBzdmdfZWxlbWVudChuYW1lKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCBuYW1lKTtcbn1cbmZ1bmN0aW9uIHRleHQoZGF0YSkge1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShkYXRhKTtcbn1cbmZ1bmN0aW9uIHNwYWNlKCkge1xuICAgIHJldHVybiB0ZXh0KCcgJyk7XG59XG5mdW5jdGlvbiBlbXB0eSgpIHtcbiAgICByZXR1cm4gdGV4dCgnJyk7XG59XG5mdW5jdGlvbiBsaXN0ZW4obm9kZSwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xuICAgIHJldHVybiAoKSA9PiBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gcHJldmVudF9kZWZhdWx0KGZuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICB9O1xufVxuZnVuY3Rpb24gc3RvcF9wcm9wYWdhdGlvbihmbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgZXZlbnQpO1xuICAgIH07XG59XG5mdW5jdGlvbiBzZWxmKGZuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGlmIChldmVudC50YXJnZXQgPT09IHRoaXMpXG4gICAgICAgICAgICBmbi5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICB9O1xufVxuZnVuY3Rpb24gYXR0cihub2RlLCBhdHRyaWJ1dGUsIHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwpXG4gICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZSk7XG4gICAgZWxzZSBpZiAobm9kZS5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlKSAhPT0gdmFsdWUpXG4gICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZSwgdmFsdWUpO1xufVxuZnVuY3Rpb24gc2V0X2F0dHJpYnV0ZXMobm9kZSwgYXR0cmlidXRlcykge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBjb25zdCBkZXNjcmlwdG9ycyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG5vZGUuX19wcm90b19fKTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIGlmIChhdHRyaWJ1dGVzW2tleV0gPT0gbnVsbCkge1xuICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXkgPT09ICdzdHlsZScpIHtcbiAgICAgICAgICAgIG5vZGUuc3R5bGUuY3NzVGV4dCA9IGF0dHJpYnV0ZXNba2V5XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkZXNjcmlwdG9yc1trZXldICYmIGRlc2NyaXB0b3JzW2tleV0uc2V0KSB7XG4gICAgICAgICAgICBub2RlW2tleV0gPSBhdHRyaWJ1dGVzW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhdHRyKG5vZGUsIGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHNldF9zdmdfYXR0cmlidXRlcyhub2RlLCBhdHRyaWJ1dGVzKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gYXR0cmlidXRlcykge1xuICAgICAgICBhdHRyKG5vZGUsIGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzZXRfY3VzdG9tX2VsZW1lbnRfZGF0YShub2RlLCBwcm9wLCB2YWx1ZSkge1xuICAgIGlmIChwcm9wIGluIG5vZGUpIHtcbiAgICAgICAgbm9kZVtwcm9wXSA9IHZhbHVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXR0cihub2RlLCBwcm9wLCB2YWx1ZSk7XG4gICAgfVxufVxuZnVuY3Rpb24geGxpbmtfYXR0cihub2RlLCBhdHRyaWJ1dGUsIHZhbHVlKSB7XG4gICAgbm9kZS5zZXRBdHRyaWJ1dGVOUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycsIGF0dHJpYnV0ZSwgdmFsdWUpO1xufVxuZnVuY3Rpb24gZ2V0X2JpbmRpbmdfZ3JvdXBfdmFsdWUoZ3JvdXApIHtcbiAgICBjb25zdCB2YWx1ZSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JvdXAubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgaWYgKGdyb3VwW2ldLmNoZWNrZWQpXG4gICAgICAgICAgICB2YWx1ZS5wdXNoKGdyb3VwW2ldLl9fdmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiB0b19udW1iZXIodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09ICcnID8gdW5kZWZpbmVkIDogK3ZhbHVlO1xufVxuZnVuY3Rpb24gdGltZV9yYW5nZXNfdG9fYXJyYXkocmFuZ2VzKSB7XG4gICAgY29uc3QgYXJyYXkgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBhcnJheS5wdXNoKHsgc3RhcnQ6IHJhbmdlcy5zdGFydChpKSwgZW5kOiByYW5nZXMuZW5kKGkpIH0pO1xuICAgIH1cbiAgICByZXR1cm4gYXJyYXk7XG59XG5mdW5jdGlvbiBjaGlsZHJlbihlbGVtZW50KSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oZWxlbWVudC5jaGlsZE5vZGVzKTtcbn1cbmZ1bmN0aW9uIGNsYWltX2VsZW1lbnQobm9kZXMsIG5hbWUsIGF0dHJpYnV0ZXMsIHN2Zykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldO1xuICAgICAgICBpZiAobm9kZS5ub2RlTmFtZSA9PT0gbmFtZSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBub2RlLmF0dHJpYnV0ZXMubGVuZ3RoOyBqICs9IDEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGUgPSBub2RlLmF0dHJpYnV0ZXNbal07XG4gICAgICAgICAgICAgICAgaWYgKCFhdHRyaWJ1dGVzW2F0dHJpYnV0ZS5uYW1lXSlcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlLm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5vZGVzLnNwbGljZShpLCAxKVswXTsgLy8gVE9ETyBzdHJpcCB1bndhbnRlZCBhdHRyaWJ1dGVzXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN2ZyA/IHN2Z19lbGVtZW50KG5hbWUpIDogZWxlbWVudChuYW1lKTtcbn1cbmZ1bmN0aW9uIGNsYWltX3RleHQobm9kZXMsIGRhdGEpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDMpIHtcbiAgICAgICAgICAgIG5vZGUuZGF0YSA9ICcnICsgZGF0YTtcbiAgICAgICAgICAgIHJldHVybiBub2Rlcy5zcGxpY2UoaSwgMSlbMF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRleHQoZGF0YSk7XG59XG5mdW5jdGlvbiBjbGFpbV9zcGFjZShub2Rlcykge1xuICAgIHJldHVybiBjbGFpbV90ZXh0KG5vZGVzLCAnICcpO1xufVxuZnVuY3Rpb24gc2V0X2RhdGEodGV4dCwgZGF0YSkge1xuICAgIGRhdGEgPSAnJyArIGRhdGE7XG4gICAgaWYgKHRleHQuZGF0YSAhPT0gZGF0YSlcbiAgICAgICAgdGV4dC5kYXRhID0gZGF0YTtcbn1cbmZ1bmN0aW9uIHNldF9pbnB1dF92YWx1ZShpbnB1dCwgdmFsdWUpIHtcbiAgICBpZiAodmFsdWUgIT0gbnVsbCB8fCBpbnB1dC52YWx1ZSkge1xuICAgICAgICBpbnB1dC52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNldF9pbnB1dF90eXBlKGlucHV0LCB0eXBlKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaW5wdXQudHlwZSA9IHR5cGU7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICB9XG59XG5mdW5jdGlvbiBzZXRfc3R5bGUobm9kZSwga2V5LCB2YWx1ZSwgaW1wb3J0YW50KSB7XG4gICAgbm9kZS5zdHlsZS5zZXRQcm9wZXJ0eShrZXksIHZhbHVlLCBpbXBvcnRhbnQgPyAnaW1wb3J0YW50JyA6ICcnKTtcbn1cbmZ1bmN0aW9uIHNlbGVjdF9vcHRpb24oc2VsZWN0LCB2YWx1ZSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsZWN0Lm9wdGlvbnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gc2VsZWN0Lm9wdGlvbnNbaV07XG4gICAgICAgIGlmIChvcHRpb24uX192YWx1ZSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBzZWxlY3Rfb3B0aW9ucyhzZWxlY3QsIHZhbHVlKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxlY3Qub3B0aW9ucy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBvcHRpb24gPSBzZWxlY3Qub3B0aW9uc1tpXTtcbiAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gfnZhbHVlLmluZGV4T2Yob3B0aW9uLl9fdmFsdWUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNlbGVjdF92YWx1ZShzZWxlY3QpIHtcbiAgICBjb25zdCBzZWxlY3RlZF9vcHRpb24gPSBzZWxlY3QucXVlcnlTZWxlY3RvcignOmNoZWNrZWQnKSB8fCBzZWxlY3Qub3B0aW9uc1swXTtcbiAgICByZXR1cm4gc2VsZWN0ZWRfb3B0aW9uICYmIHNlbGVjdGVkX29wdGlvbi5fX3ZhbHVlO1xufVxuZnVuY3Rpb24gc2VsZWN0X211bHRpcGxlX3ZhbHVlKHNlbGVjdCkge1xuICAgIHJldHVybiBbXS5tYXAuY2FsbChzZWxlY3QucXVlcnlTZWxlY3RvckFsbCgnOmNoZWNrZWQnKSwgb3B0aW9uID0+IG9wdGlvbi5fX3ZhbHVlKTtcbn1cbmZ1bmN0aW9uIGFkZF9yZXNpemVfbGlzdGVuZXIoZWxlbWVudCwgZm4pIHtcbiAgICBpZiAoZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KS5wb3NpdGlvbiA9PT0gJ3N0YXRpYycpIHtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgfVxuICAgIGNvbnN0IG9iamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29iamVjdCcpO1xuICAgIG9iamVjdC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2Rpc3BsYXk6IGJsb2NrOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgbGVmdDogMDsgaGVpZ2h0OiAxMDAlOyB3aWR0aDogMTAwJTsgb3ZlcmZsb3c6IGhpZGRlbjsgcG9pbnRlci1ldmVudHM6IG5vbmU7IHotaW5kZXg6IC0xOycpO1xuICAgIG9iamVjdC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcbiAgICBvYmplY3QudHlwZSA9ICd0ZXh0L2h0bWwnO1xuICAgIG9iamVjdC50YWJJbmRleCA9IC0xO1xuICAgIGxldCB3aW47XG4gICAgb2JqZWN0Lm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgd2luID0gb2JqZWN0LmNvbnRlbnREb2N1bWVudC5kZWZhdWx0VmlldztcbiAgICAgICAgd2luLmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZuKTtcbiAgICB9O1xuICAgIGlmICgvVHJpZGVudC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkge1xuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKG9iamVjdCk7XG4gICAgICAgIG9iamVjdC5kYXRhID0gJ2Fib3V0OmJsYW5rJztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG9iamVjdC5kYXRhID0gJ2Fib3V0OmJsYW5rJztcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChvYmplY3QpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBjYW5jZWw6ICgpID0+IHtcbiAgICAgICAgICAgIHdpbiAmJiB3aW4ucmVtb3ZlRXZlbnRMaXN0ZW5lciAmJiB3aW4ucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZm4pO1xuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDaGlsZChvYmplY3QpO1xuICAgICAgICB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHRvZ2dsZV9jbGFzcyhlbGVtZW50LCBuYW1lLCB0b2dnbGUpIHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdFt0b2dnbGUgPyAnYWRkJyA6ICdyZW1vdmUnXShuYW1lKTtcbn1cbmZ1bmN0aW9uIGN1c3RvbV9ldmVudCh0eXBlLCBkZXRhaWwpIHtcbiAgICBjb25zdCBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gICAgZS5pbml0Q3VzdG9tRXZlbnQodHlwZSwgZmFsc2UsIGZhbHNlLCBkZXRhaWwpO1xuICAgIHJldHVybiBlO1xufVxuZnVuY3Rpb24gcXVlcnlfc2VsZWN0b3JfYWxsKHNlbGVjdG9yLCBwYXJlbnQgPSBkb2N1bWVudC5ib2R5KSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20ocGFyZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKTtcbn1cbmNsYXNzIEh0bWxUYWcge1xuICAgIGNvbnN0cnVjdG9yKGh0bWwsIGFuY2hvciA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5lID0gZWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuYSA9IGFuY2hvcjtcbiAgICAgICAgdGhpcy51KGh0bWwpO1xuICAgIH1cbiAgICBtKHRhcmdldCwgYW5jaG9yID0gbnVsbCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubi5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgaW5zZXJ0KHRhcmdldCwgdGhpcy5uW2ldLCBhbmNob3IpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudCA9IHRhcmdldDtcbiAgICB9XG4gICAgdShodG1sKSB7XG4gICAgICAgIHRoaXMuZS5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgICB0aGlzLm4gPSBBcnJheS5mcm9tKHRoaXMuZS5jaGlsZE5vZGVzKTtcbiAgICB9XG4gICAgcChodG1sKSB7XG4gICAgICAgIHRoaXMuZCgpO1xuICAgICAgICB0aGlzLnUoaHRtbCk7XG4gICAgICAgIHRoaXMubSh0aGlzLnQsIHRoaXMuYSk7XG4gICAgfVxuICAgIGQoKSB7XG4gICAgICAgIHRoaXMubi5mb3JFYWNoKGRldGFjaCk7XG4gICAgfVxufVxuXG5sZXQgc3R5bGVzaGVldDtcbmxldCBhY3RpdmUgPSAwO1xubGV0IGN1cnJlbnRfcnVsZXMgPSB7fTtcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9kYXJrc2t5YXBwL3N0cmluZy1oYXNoL2Jsb2IvbWFzdGVyL2luZGV4LmpzXG5mdW5jdGlvbiBoYXNoKHN0cikge1xuICAgIGxldCBoYXNoID0gNTM4MTtcbiAgICBsZXQgaSA9IHN0ci5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSlcbiAgICAgICAgaGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpIF4gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgcmV0dXJuIGhhc2ggPj4+IDA7XG59XG5mdW5jdGlvbiBjcmVhdGVfcnVsZShub2RlLCBhLCBiLCBkdXJhdGlvbiwgZGVsYXksIGVhc2UsIGZuLCB1aWQgPSAwKSB7XG4gICAgY29uc3Qgc3RlcCA9IDE2LjY2NiAvIGR1cmF0aW9uO1xuICAgIGxldCBrZXlmcmFtZXMgPSAne1xcbic7XG4gICAgZm9yIChsZXQgcCA9IDA7IHAgPD0gMTsgcCArPSBzdGVwKSB7XG4gICAgICAgIGNvbnN0IHQgPSBhICsgKGIgLSBhKSAqIGVhc2UocCk7XG4gICAgICAgIGtleWZyYW1lcyArPSBwICogMTAwICsgYCV7JHtmbih0LCAxIC0gdCl9fVxcbmA7XG4gICAgfVxuICAgIGNvbnN0IHJ1bGUgPSBrZXlmcmFtZXMgKyBgMTAwJSB7JHtmbihiLCAxIC0gYil9fVxcbn1gO1xuICAgIGNvbnN0IG5hbWUgPSBgX19zdmVsdGVfJHtoYXNoKHJ1bGUpfV8ke3VpZH1gO1xuICAgIGlmICghY3VycmVudF9ydWxlc1tuYW1lXSkge1xuICAgICAgICBpZiAoIXN0eWxlc2hlZXQpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0eWxlID0gZWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgICAgICAgICAgc3R5bGVzaGVldCA9IHN0eWxlLnNoZWV0O1xuICAgICAgICB9XG4gICAgICAgIGN1cnJlbnRfcnVsZXNbbmFtZV0gPSB0cnVlO1xuICAgICAgICBzdHlsZXNoZWV0Lmluc2VydFJ1bGUoYEBrZXlmcmFtZXMgJHtuYW1lfSAke3J1bGV9YCwgc3R5bGVzaGVldC5jc3NSdWxlcy5sZW5ndGgpO1xuICAgIH1cbiAgICBjb25zdCBhbmltYXRpb24gPSBub2RlLnN0eWxlLmFuaW1hdGlvbiB8fCAnJztcbiAgICBub2RlLnN0eWxlLmFuaW1hdGlvbiA9IGAke2FuaW1hdGlvbiA/IGAke2FuaW1hdGlvbn0sIGAgOiBgYH0ke25hbWV9ICR7ZHVyYXRpb259bXMgbGluZWFyICR7ZGVsYXl9bXMgMSBib3RoYDtcbiAgICBhY3RpdmUgKz0gMTtcbiAgICByZXR1cm4gbmFtZTtcbn1cbmZ1bmN0aW9uIGRlbGV0ZV9ydWxlKG5vZGUsIG5hbWUpIHtcbiAgICBub2RlLnN0eWxlLmFuaW1hdGlvbiA9IChub2RlLnN0eWxlLmFuaW1hdGlvbiB8fCAnJylcbiAgICAgICAgLnNwbGl0KCcsICcpXG4gICAgICAgIC5maWx0ZXIobmFtZVxuICAgICAgICA/IGFuaW0gPT4gYW5pbS5pbmRleE9mKG5hbWUpIDwgMCAvLyByZW1vdmUgc3BlY2lmaWMgYW5pbWF0aW9uXG4gICAgICAgIDogYW5pbSA9PiBhbmltLmluZGV4T2YoJ19fc3ZlbHRlJykgPT09IC0xIC8vIHJlbW92ZSBhbGwgU3ZlbHRlIGFuaW1hdGlvbnNcbiAgICApXG4gICAgICAgIC5qb2luKCcsICcpO1xuICAgIGlmIChuYW1lICYmICEtLWFjdGl2ZSlcbiAgICAgICAgY2xlYXJfcnVsZXMoKTtcbn1cbmZ1bmN0aW9uIGNsZWFyX3J1bGVzKCkge1xuICAgIHJhZigoKSA9PiB7XG4gICAgICAgIGlmIChhY3RpdmUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBpID0gc3R5bGVzaGVldC5jc3NSdWxlcy5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpLS0pXG4gICAgICAgICAgICBzdHlsZXNoZWV0LmRlbGV0ZVJ1bGUoaSk7XG4gICAgICAgIGN1cnJlbnRfcnVsZXMgPSB7fTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlX2FuaW1hdGlvbihub2RlLCBmcm9tLCBmbiwgcGFyYW1zKSB7XG4gICAgaWYgKCFmcm9tKVxuICAgICAgICByZXR1cm4gbm9vcDtcbiAgICBjb25zdCB0byA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgaWYgKGZyb20ubGVmdCA9PT0gdG8ubGVmdCAmJiBmcm9tLnJpZ2h0ID09PSB0by5yaWdodCAmJiBmcm9tLnRvcCA9PT0gdG8udG9wICYmIGZyb20uYm90dG9tID09PSB0by5ib3R0b20pXG4gICAgICAgIHJldHVybiBub29wO1xuICAgIGNvbnN0IHsgZGVsYXkgPSAwLCBkdXJhdGlvbiA9IDMwMCwgZWFzaW5nID0gaWRlbnRpdHksIFxuICAgIC8vIEB0cy1pZ25vcmUgdG9kbzogc2hvdWxkIHRoaXMgYmUgc2VwYXJhdGVkIGZyb20gZGVzdHJ1Y3R1cmluZz8gT3Igc3RhcnQvZW5kIGFkZGVkIHRvIHB1YmxpYyBhcGkgYW5kIGRvY3VtZW50YXRpb24/XG4gICAgc3RhcnQ6IHN0YXJ0X3RpbWUgPSBub3coKSArIGRlbGF5LCBcbiAgICAvLyBAdHMtaWdub3JlIHRvZG86XG4gICAgZW5kID0gc3RhcnRfdGltZSArIGR1cmF0aW9uLCB0aWNrID0gbm9vcCwgY3NzIH0gPSBmbihub2RlLCB7IGZyb20sIHRvIH0sIHBhcmFtcyk7XG4gICAgbGV0IHJ1bm5pbmcgPSB0cnVlO1xuICAgIGxldCBzdGFydGVkID0gZmFsc2U7XG4gICAgbGV0IG5hbWU7XG4gICAgZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICAgIGlmIChjc3MpIHtcbiAgICAgICAgICAgIG5hbWUgPSBjcmVhdGVfcnVsZShub2RlLCAwLCAxLCBkdXJhdGlvbiwgZGVsYXksIGVhc2luZywgY3NzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWRlbGF5KSB7XG4gICAgICAgICAgICBzdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBzdG9wKCkge1xuICAgICAgICBpZiAoY3NzKVxuICAgICAgICAgICAgZGVsZXRlX3J1bGUobm9kZSwgbmFtZSk7XG4gICAgICAgIHJ1bm5pbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgbG9vcChub3cgPT4ge1xuICAgICAgICBpZiAoIXN0YXJ0ZWQgJiYgbm93ID49IHN0YXJ0X3RpbWUpIHtcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFydGVkICYmIG5vdyA+PSBlbmQpIHtcbiAgICAgICAgICAgIHRpY2soMSwgMCk7XG4gICAgICAgICAgICBzdG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFydW5uaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHAgPSBub3cgLSBzdGFydF90aW1lO1xuICAgICAgICAgICAgY29uc3QgdCA9IDAgKyAxICogZWFzaW5nKHAgLyBkdXJhdGlvbik7XG4gICAgICAgICAgICB0aWNrKHQsIDEgLSB0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcbiAgICBzdGFydCgpO1xuICAgIHRpY2soMCwgMSk7XG4gICAgcmV0dXJuIHN0b3A7XG59XG5mdW5jdGlvbiBmaXhfcG9zaXRpb24obm9kZSkge1xuICAgIGNvbnN0IHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShub2RlKTtcbiAgICBpZiAoc3R5bGUucG9zaXRpb24gIT09ICdhYnNvbHV0ZScgJiYgc3R5bGUucG9zaXRpb24gIT09ICdmaXhlZCcpIHtcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBzdHlsZTtcbiAgICAgICAgY29uc3QgYSA9IG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIG5vZGUuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBub2RlLnN0eWxlLndpZHRoID0gd2lkdGg7XG4gICAgICAgIG5vZGUuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICBhZGRfdHJhbnNmb3JtKG5vZGUsIGEpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFkZF90cmFuc2Zvcm0obm9kZSwgYSkge1xuICAgIGNvbnN0IGIgPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGlmIChhLmxlZnQgIT09IGIubGVmdCB8fCBhLnRvcCAhPT0gYi50b3ApIHtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKG5vZGUpO1xuICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSBzdHlsZS50cmFuc2Zvcm0gPT09ICdub25lJyA/ICcnIDogc3R5bGUudHJhbnNmb3JtO1xuICAgICAgICBub2RlLnN0eWxlLnRyYW5zZm9ybSA9IGAke3RyYW5zZm9ybX0gdHJhbnNsYXRlKCR7YS5sZWZ0IC0gYi5sZWZ0fXB4LCAke2EudG9wIC0gYi50b3B9cHgpYDtcbiAgICB9XG59XG5cbmxldCBjdXJyZW50X2NvbXBvbmVudDtcbmZ1bmN0aW9uIHNldF9jdXJyZW50X2NvbXBvbmVudChjb21wb25lbnQpIHtcbiAgICBjdXJyZW50X2NvbXBvbmVudCA9IGNvbXBvbmVudDtcbn1cbmZ1bmN0aW9uIGdldF9jdXJyZW50X2NvbXBvbmVudCgpIHtcbiAgICBpZiAoIWN1cnJlbnRfY29tcG9uZW50KVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZ1bmN0aW9uIGNhbGxlZCBvdXRzaWRlIGNvbXBvbmVudCBpbml0aWFsaXphdGlvbmApO1xuICAgIHJldHVybiBjdXJyZW50X2NvbXBvbmVudDtcbn1cbmZ1bmN0aW9uIGJlZm9yZVVwZGF0ZShmbikge1xuICAgIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLmJlZm9yZV91cGRhdGUucHVzaChmbik7XG59XG5mdW5jdGlvbiBvbk1vdW50KGZuKSB7XG4gICAgZ2V0X2N1cnJlbnRfY29tcG9uZW50KCkuJCQub25fbW91bnQucHVzaChmbik7XG59XG5mdW5jdGlvbiBhZnRlclVwZGF0ZShmbikge1xuICAgIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLmFmdGVyX3VwZGF0ZS5wdXNoKGZuKTtcbn1cbmZ1bmN0aW9uIG9uRGVzdHJveShmbikge1xuICAgIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLm9uX2Rlc3Ryb3kucHVzaChmbik7XG59XG5mdW5jdGlvbiBjcmVhdGVFdmVudERpc3BhdGNoZXIoKSB7XG4gICAgY29uc3QgY29tcG9uZW50ID0gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCk7XG4gICAgcmV0dXJuICh0eXBlLCBkZXRhaWwpID0+IHtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gY29tcG9uZW50LiQkLmNhbGxiYWNrc1t0eXBlXTtcbiAgICAgICAgaWYgKGNhbGxiYWNrcykge1xuICAgICAgICAgICAgLy8gVE9ETyBhcmUgdGhlcmUgc2l0dWF0aW9ucyB3aGVyZSBldmVudHMgY291bGQgYmUgZGlzcGF0Y2hlZFxuICAgICAgICAgICAgLy8gaW4gYSBzZXJ2ZXIgKG5vbi1ET00pIGVudmlyb25tZW50P1xuICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBjdXN0b21fZXZlbnQodHlwZSwgZGV0YWlsKTtcbiAgICAgICAgICAgIGNhbGxiYWNrcy5zbGljZSgpLmZvckVhY2goZm4gPT4ge1xuICAgICAgICAgICAgICAgIGZuLmNhbGwoY29tcG9uZW50LCBldmVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59XG5mdW5jdGlvbiBzZXRDb250ZXh0KGtleSwgY29udGV4dCkge1xuICAgIGdldF9jdXJyZW50X2NvbXBvbmVudCgpLiQkLmNvbnRleHQuc2V0KGtleSwgY29udGV4dCk7XG59XG5mdW5jdGlvbiBnZXRDb250ZXh0KGtleSkge1xuICAgIHJldHVybiBnZXRfY3VycmVudF9jb21wb25lbnQoKS4kJC5jb250ZXh0LmdldChrZXkpO1xufVxuLy8gVE9ETyBmaWd1cmUgb3V0IGlmIHdlIHN0aWxsIHdhbnQgdG8gc3VwcG9ydFxuLy8gc2hvcnRoYW5kIGV2ZW50cywgb3IgaWYgd2Ugd2FudCB0byBpbXBsZW1lbnRcbi8vIGEgcmVhbCBidWJibGluZyBtZWNoYW5pc21cbmZ1bmN0aW9uIGJ1YmJsZShjb21wb25lbnQsIGV2ZW50KSB7XG4gICAgY29uc3QgY2FsbGJhY2tzID0gY29tcG9uZW50LiQkLmNhbGxiYWNrc1tldmVudC50eXBlXTtcbiAgICBpZiAoY2FsbGJhY2tzKSB7XG4gICAgICAgIGNhbGxiYWNrcy5zbGljZSgpLmZvckVhY2goZm4gPT4gZm4oZXZlbnQpKTtcbiAgICB9XG59XG5cbmNvbnN0IGRpcnR5X2NvbXBvbmVudHMgPSBbXTtcbmNvbnN0IGludHJvcyA9IHsgZW5hYmxlZDogZmFsc2UgfTtcbmNvbnN0IGJpbmRpbmdfY2FsbGJhY2tzID0gW107XG5jb25zdCByZW5kZXJfY2FsbGJhY2tzID0gW107XG5jb25zdCBmbHVzaF9jYWxsYmFja3MgPSBbXTtcbmNvbnN0IHJlc29sdmVkX3Byb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcbmxldCB1cGRhdGVfc2NoZWR1bGVkID0gZmFsc2U7XG5mdW5jdGlvbiBzY2hlZHVsZV91cGRhdGUoKSB7XG4gICAgaWYgKCF1cGRhdGVfc2NoZWR1bGVkKSB7XG4gICAgICAgIHVwZGF0ZV9zY2hlZHVsZWQgPSB0cnVlO1xuICAgICAgICByZXNvbHZlZF9wcm9taXNlLnRoZW4oZmx1c2gpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHRpY2soKSB7XG4gICAgc2NoZWR1bGVfdXBkYXRlKCk7XG4gICAgcmV0dXJuIHJlc29sdmVkX3Byb21pc2U7XG59XG5mdW5jdGlvbiBhZGRfcmVuZGVyX2NhbGxiYWNrKGZuKSB7XG4gICAgcmVuZGVyX2NhbGxiYWNrcy5wdXNoKGZuKTtcbn1cbmZ1bmN0aW9uIGFkZF9mbHVzaF9jYWxsYmFjayhmbikge1xuICAgIGZsdXNoX2NhbGxiYWNrcy5wdXNoKGZuKTtcbn1cbmZ1bmN0aW9uIGZsdXNoKCkge1xuICAgIGNvbnN0IHNlZW5fY2FsbGJhY2tzID0gbmV3IFNldCgpO1xuICAgIGRvIHtcbiAgICAgICAgLy8gZmlyc3QsIGNhbGwgYmVmb3JlVXBkYXRlIGZ1bmN0aW9uc1xuICAgICAgICAvLyBhbmQgdXBkYXRlIGNvbXBvbmVudHNcbiAgICAgICAgd2hpbGUgKGRpcnR5X2NvbXBvbmVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnQgPSBkaXJ0eV9jb21wb25lbnRzLnNoaWZ0KCk7XG4gICAgICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQoY29tcG9uZW50KTtcbiAgICAgICAgICAgIHVwZGF0ZShjb21wb25lbnQuJCQpO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChiaW5kaW5nX2NhbGxiYWNrcy5sZW5ndGgpXG4gICAgICAgICAgICBiaW5kaW5nX2NhbGxiYWNrcy5wb3AoKSgpO1xuICAgICAgICAvLyB0aGVuLCBvbmNlIGNvbXBvbmVudHMgYXJlIHVwZGF0ZWQsIGNhbGxcbiAgICAgICAgLy8gYWZ0ZXJVcGRhdGUgZnVuY3Rpb25zLiBUaGlzIG1heSBjYXVzZVxuICAgICAgICAvLyBzdWJzZXF1ZW50IHVwZGF0ZXMuLi5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZW5kZXJfY2FsbGJhY2tzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBjYWxsYmFjayA9IHJlbmRlcl9jYWxsYmFja3NbaV07XG4gICAgICAgICAgICBpZiAoIXNlZW5fY2FsbGJhY2tzLmhhcyhjYWxsYmFjaykpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgIC8vIC4uLnNvIGd1YXJkIGFnYWluc3QgaW5maW5pdGUgbG9vcHNcbiAgICAgICAgICAgICAgICBzZWVuX2NhbGxiYWNrcy5hZGQoY2FsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlbmRlcl9jYWxsYmFja3MubGVuZ3RoID0gMDtcbiAgICB9IHdoaWxlIChkaXJ0eV9jb21wb25lbnRzLmxlbmd0aCk7XG4gICAgd2hpbGUgKGZsdXNoX2NhbGxiYWNrcy5sZW5ndGgpIHtcbiAgICAgICAgZmx1c2hfY2FsbGJhY2tzLnBvcCgpKCk7XG4gICAgfVxuICAgIHVwZGF0ZV9zY2hlZHVsZWQgPSBmYWxzZTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZSgkJCkge1xuICAgIGlmICgkJC5mcmFnbWVudCAhPT0gbnVsbCkge1xuICAgICAgICAkJC51cGRhdGUoKTtcbiAgICAgICAgcnVuX2FsbCgkJC5iZWZvcmVfdXBkYXRlKTtcbiAgICAgICAgY29uc3QgZGlydHkgPSAkJC5kaXJ0eTtcbiAgICAgICAgJCQuZGlydHkgPSBbLTFdO1xuICAgICAgICAkJC5mcmFnbWVudCAmJiAkJC5mcmFnbWVudC5wKCQkLmN0eCwgZGlydHkpO1xuICAgICAgICAkJC5hZnRlcl91cGRhdGUuZm9yRWFjaChhZGRfcmVuZGVyX2NhbGxiYWNrKTtcbiAgICB9XG59XG5cbmxldCBwcm9taXNlO1xuZnVuY3Rpb24gd2FpdCgpIHtcbiAgICBpZiAoIXByb21pc2UpIHtcbiAgICAgICAgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICBwcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgcHJvbWlzZSA9IG51bGw7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cbmZ1bmN0aW9uIGRpc3BhdGNoKG5vZGUsIGRpcmVjdGlvbiwga2luZCkge1xuICAgIG5vZGUuZGlzcGF0Y2hFdmVudChjdXN0b21fZXZlbnQoYCR7ZGlyZWN0aW9uID8gJ2ludHJvJyA6ICdvdXRybyd9JHtraW5kfWApKTtcbn1cbmNvbnN0IG91dHJvaW5nID0gbmV3IFNldCgpO1xubGV0IG91dHJvcztcbmZ1bmN0aW9uIGdyb3VwX291dHJvcygpIHtcbiAgICBvdXRyb3MgPSB7XG4gICAgICAgIHI6IDAsXG4gICAgICAgIGM6IFtdLFxuICAgICAgICBwOiBvdXRyb3MgLy8gcGFyZW50IGdyb3VwXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNoZWNrX291dHJvcygpIHtcbiAgICBpZiAoIW91dHJvcy5yKSB7XG4gICAgICAgIHJ1bl9hbGwob3V0cm9zLmMpO1xuICAgIH1cbiAgICBvdXRyb3MgPSBvdXRyb3MucDtcbn1cbmZ1bmN0aW9uIHRyYW5zaXRpb25faW4oYmxvY2ssIGxvY2FsKSB7XG4gICAgaWYgKGJsb2NrICYmIGJsb2NrLmkpIHtcbiAgICAgICAgb3V0cm9pbmcuZGVsZXRlKGJsb2NrKTtcbiAgICAgICAgYmxvY2suaShsb2NhbCk7XG4gICAgfVxufVxuZnVuY3Rpb24gdHJhbnNpdGlvbl9vdXQoYmxvY2ssIGxvY2FsLCBkZXRhY2gsIGNhbGxiYWNrKSB7XG4gICAgaWYgKGJsb2NrICYmIGJsb2NrLm8pIHtcbiAgICAgICAgaWYgKG91dHJvaW5nLmhhcyhibG9jaykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIG91dHJvaW5nLmFkZChibG9jayk7XG4gICAgICAgIG91dHJvcy5jLnB1c2goKCkgPT4ge1xuICAgICAgICAgICAgb3V0cm9pbmcuZGVsZXRlKGJsb2NrKTtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGlmIChkZXRhY2gpXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrLmQoMSk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGJsb2NrLm8obG9jYWwpO1xuICAgIH1cbn1cbmNvbnN0IG51bGxfdHJhbnNpdGlvbiA9IHsgZHVyYXRpb246IDAgfTtcbmZ1bmN0aW9uIGNyZWF0ZV9pbl90cmFuc2l0aW9uKG5vZGUsIGZuLCBwYXJhbXMpIHtcbiAgICBsZXQgY29uZmlnID0gZm4obm9kZSwgcGFyYW1zKTtcbiAgICBsZXQgcnVubmluZyA9IGZhbHNlO1xuICAgIGxldCBhbmltYXRpb25fbmFtZTtcbiAgICBsZXQgdGFzaztcbiAgICBsZXQgdWlkID0gMDtcbiAgICBmdW5jdGlvbiBjbGVhbnVwKCkge1xuICAgICAgICBpZiAoYW5pbWF0aW9uX25hbWUpXG4gICAgICAgICAgICBkZWxldGVfcnVsZShub2RlLCBhbmltYXRpb25fbmFtZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdvKCkge1xuICAgICAgICBjb25zdCB7IGRlbGF5ID0gMCwgZHVyYXRpb24gPSAzMDAsIGVhc2luZyA9IGlkZW50aXR5LCB0aWNrID0gbm9vcCwgY3NzIH0gPSBjb25maWcgfHwgbnVsbF90cmFuc2l0aW9uO1xuICAgICAgICBpZiAoY3NzKVxuICAgICAgICAgICAgYW5pbWF0aW9uX25hbWUgPSBjcmVhdGVfcnVsZShub2RlLCAwLCAxLCBkdXJhdGlvbiwgZGVsYXksIGVhc2luZywgY3NzLCB1aWQrKyk7XG4gICAgICAgIHRpY2soMCwgMSk7XG4gICAgICAgIGNvbnN0IHN0YXJ0X3RpbWUgPSBub3coKSArIGRlbGF5O1xuICAgICAgICBjb25zdCBlbmRfdGltZSA9IHN0YXJ0X3RpbWUgKyBkdXJhdGlvbjtcbiAgICAgICAgaWYgKHRhc2spXG4gICAgICAgICAgICB0YXNrLmFib3J0KCk7XG4gICAgICAgIHJ1bm5pbmcgPSB0cnVlO1xuICAgICAgICBhZGRfcmVuZGVyX2NhbGxiYWNrKCgpID0+IGRpc3BhdGNoKG5vZGUsIHRydWUsICdzdGFydCcpKTtcbiAgICAgICAgdGFzayA9IGxvb3Aobm93ID0+IHtcbiAgICAgICAgICAgIGlmIChydW5uaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vdyA+PSBlbmRfdGltZSkge1xuICAgICAgICAgICAgICAgICAgICB0aWNrKDEsIDApO1xuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChub2RlLCB0cnVlLCAnZW5kJyk7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5vdyA+PSBzdGFydF90aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlYXNpbmcoKG5vdyAtIHN0YXJ0X3RpbWUpIC8gZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB0aWNrKHQsIDEgLSB0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcnVubmluZztcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxldCBzdGFydGVkID0gZmFsc2U7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3RhcnQoKSB7XG4gICAgICAgICAgICBpZiAoc3RhcnRlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBkZWxldGVfcnVsZShub2RlKTtcbiAgICAgICAgICAgIGlmIChpc19mdW5jdGlvbihjb25maWcpKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnID0gY29uZmlnKCk7XG4gICAgICAgICAgICAgICAgd2FpdCgpLnRoZW4oZ28pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZ28oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW52YWxpZGF0ZSgpIHtcbiAgICAgICAgICAgIHN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW5kKCkge1xuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgcnVubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZV9vdXRfdHJhbnNpdGlvbihub2RlLCBmbiwgcGFyYW1zKSB7XG4gICAgbGV0IGNvbmZpZyA9IGZuKG5vZGUsIHBhcmFtcyk7XG4gICAgbGV0IHJ1bm5pbmcgPSB0cnVlO1xuICAgIGxldCBhbmltYXRpb25fbmFtZTtcbiAgICBjb25zdCBncm91cCA9IG91dHJvcztcbiAgICBncm91cC5yICs9IDE7XG4gICAgZnVuY3Rpb24gZ28oKSB7XG4gICAgICAgIGNvbnN0IHsgZGVsYXkgPSAwLCBkdXJhdGlvbiA9IDMwMCwgZWFzaW5nID0gaWRlbnRpdHksIHRpY2sgPSBub29wLCBjc3MgfSA9IGNvbmZpZyB8fCBudWxsX3RyYW5zaXRpb247XG4gICAgICAgIGlmIChjc3MpXG4gICAgICAgICAgICBhbmltYXRpb25fbmFtZSA9IGNyZWF0ZV9ydWxlKG5vZGUsIDEsIDAsIGR1cmF0aW9uLCBkZWxheSwgZWFzaW5nLCBjc3MpO1xuICAgICAgICBjb25zdCBzdGFydF90aW1lID0gbm93KCkgKyBkZWxheTtcbiAgICAgICAgY29uc3QgZW5kX3RpbWUgPSBzdGFydF90aW1lICsgZHVyYXRpb247XG4gICAgICAgIGFkZF9yZW5kZXJfY2FsbGJhY2soKCkgPT4gZGlzcGF0Y2gobm9kZSwgZmFsc2UsICdzdGFydCcpKTtcbiAgICAgICAgbG9vcChub3cgPT4ge1xuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAobm93ID49IGVuZF90aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpY2soMCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKG5vZGUsIGZhbHNlLCAnZW5kJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghLS1ncm91cC5yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIHdpbGwgcmVzdWx0IGluIGBlbmQoKWAgYmVpbmcgY2FsbGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc28gd2UgZG9uJ3QgbmVlZCB0byBjbGVhbiB1cCBoZXJlXG4gICAgICAgICAgICAgICAgICAgICAgICBydW5fYWxsKGdyb3VwLmMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5vdyA+PSBzdGFydF90aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlYXNpbmcoKG5vdyAtIHN0YXJ0X3RpbWUpIC8gZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB0aWNrKDEgLSB0LCB0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcnVubmluZztcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChpc19mdW5jdGlvbihjb25maWcpKSB7XG4gICAgICAgIHdhaXQoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIGNvbmZpZyA9IGNvbmZpZygpO1xuICAgICAgICAgICAgZ28oKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBnbygpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBlbmQocmVzZXQpIHtcbiAgICAgICAgICAgIGlmIChyZXNldCAmJiBjb25maWcudGljaykge1xuICAgICAgICAgICAgICAgIGNvbmZpZy50aWNrKDEsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uX25hbWUpXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZV9ydWxlKG5vZGUsIGFuaW1hdGlvbl9uYW1lKTtcbiAgICAgICAgICAgICAgICBydW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlX2JpZGlyZWN0aW9uYWxfdHJhbnNpdGlvbihub2RlLCBmbiwgcGFyYW1zLCBpbnRybykge1xuICAgIGxldCBjb25maWcgPSBmbihub2RlLCBwYXJhbXMpO1xuICAgIGxldCB0ID0gaW50cm8gPyAwIDogMTtcbiAgICBsZXQgcnVubmluZ19wcm9ncmFtID0gbnVsbDtcbiAgICBsZXQgcGVuZGluZ19wcm9ncmFtID0gbnVsbDtcbiAgICBsZXQgYW5pbWF0aW9uX25hbWUgPSBudWxsO1xuICAgIGZ1bmN0aW9uIGNsZWFyX2FuaW1hdGlvbigpIHtcbiAgICAgICAgaWYgKGFuaW1hdGlvbl9uYW1lKVxuICAgICAgICAgICAgZGVsZXRlX3J1bGUobm9kZSwgYW5pbWF0aW9uX25hbWUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbml0KHByb2dyYW0sIGR1cmF0aW9uKSB7XG4gICAgICAgIGNvbnN0IGQgPSBwcm9ncmFtLmIgLSB0O1xuICAgICAgICBkdXJhdGlvbiAqPSBNYXRoLmFicyhkKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGE6IHQsXG4gICAgICAgICAgICBiOiBwcm9ncmFtLmIsXG4gICAgICAgICAgICBkLFxuICAgICAgICAgICAgZHVyYXRpb24sXG4gICAgICAgICAgICBzdGFydDogcHJvZ3JhbS5zdGFydCxcbiAgICAgICAgICAgIGVuZDogcHJvZ3JhbS5zdGFydCArIGR1cmF0aW9uLFxuICAgICAgICAgICAgZ3JvdXA6IHByb2dyYW0uZ3JvdXBcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ28oYikge1xuICAgICAgICBjb25zdCB7IGRlbGF5ID0gMCwgZHVyYXRpb24gPSAzMDAsIGVhc2luZyA9IGlkZW50aXR5LCB0aWNrID0gbm9vcCwgY3NzIH0gPSBjb25maWcgfHwgbnVsbF90cmFuc2l0aW9uO1xuICAgICAgICBjb25zdCBwcm9ncmFtID0ge1xuICAgICAgICAgICAgc3RhcnQ6IG5vdygpICsgZGVsYXksXG4gICAgICAgICAgICBiXG4gICAgICAgIH07XG4gICAgICAgIGlmICghYikge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSB0b2RvOiBpbXByb3ZlIHR5cGluZ3NcbiAgICAgICAgICAgIHByb2dyYW0uZ3JvdXAgPSBvdXRyb3M7XG4gICAgICAgICAgICBvdXRyb3MuciArPSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChydW5uaW5nX3Byb2dyYW0pIHtcbiAgICAgICAgICAgIHBlbmRpbmdfcHJvZ3JhbSA9IHByb2dyYW07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGFuIGludHJvLCBhbmQgdGhlcmUncyBhIGRlbGF5LCB3ZSBuZWVkIHRvIGRvXG4gICAgICAgICAgICAvLyBhbiBpbml0aWFsIHRpY2sgYW5kL29yIGFwcGx5IENTUyBhbmltYXRpb24gaW1tZWRpYXRlbHlcbiAgICAgICAgICAgIGlmIChjc3MpIHtcbiAgICAgICAgICAgICAgICBjbGVhcl9hbmltYXRpb24oKTtcbiAgICAgICAgICAgICAgICBhbmltYXRpb25fbmFtZSA9IGNyZWF0ZV9ydWxlKG5vZGUsIHQsIGIsIGR1cmF0aW9uLCBkZWxheSwgZWFzaW5nLCBjc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGIpXG4gICAgICAgICAgICAgICAgdGljaygwLCAxKTtcbiAgICAgICAgICAgIHJ1bm5pbmdfcHJvZ3JhbSA9IGluaXQocHJvZ3JhbSwgZHVyYXRpb24pO1xuICAgICAgICAgICAgYWRkX3JlbmRlcl9jYWxsYmFjaygoKSA9PiBkaXNwYXRjaChub2RlLCBiLCAnc3RhcnQnKSk7XG4gICAgICAgICAgICBsb29wKG5vdyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdfcHJvZ3JhbSAmJiBub3cgPiBwZW5kaW5nX3Byb2dyYW0uc3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcnVubmluZ19wcm9ncmFtID0gaW5pdChwZW5kaW5nX3Byb2dyYW0sIGR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ19wcm9ncmFtID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2gobm9kZSwgcnVubmluZ19wcm9ncmFtLmIsICdzdGFydCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3NzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhcl9hbmltYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbl9uYW1lID0gY3JlYXRlX3J1bGUobm9kZSwgdCwgcnVubmluZ19wcm9ncmFtLmIsIHJ1bm5pbmdfcHJvZ3JhbS5kdXJhdGlvbiwgMCwgZWFzaW5nLCBjb25maWcuY3NzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocnVubmluZ19wcm9ncmFtKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub3cgPj0gcnVubmluZ19wcm9ncmFtLmVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGljayh0ID0gcnVubmluZ19wcm9ncmFtLmIsIDEgLSB0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKG5vZGUsIHJ1bm5pbmdfcHJvZ3JhbS5iLCAnZW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBlbmRpbmdfcHJvZ3JhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlJ3JlIGRvbmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocnVubmluZ19wcm9ncmFtLmIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW50cm8g4oCUIHdlIGNhbiB0aWR5IHVwIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyX2FuaW1hdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3V0cm8g4oCUIG5lZWRzIHRvIGJlIGNvb3JkaW5hdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghLS1ydW5uaW5nX3Byb2dyYW0uZ3JvdXAucilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bl9hbGwocnVubmluZ19wcm9ncmFtLmdyb3VwLmMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bm5pbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobm93ID49IHJ1bm5pbmdfcHJvZ3JhbS5zdGFydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcCA9IG5vdyAtIHJ1bm5pbmdfcHJvZ3JhbS5zdGFydDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBydW5uaW5nX3Byb2dyYW0uYSArIHJ1bm5pbmdfcHJvZ3JhbS5kICogZWFzaW5nKHAgLyBydW5uaW5nX3Byb2dyYW0uZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGljayh0LCAxIC0gdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhKHJ1bm5pbmdfcHJvZ3JhbSB8fCBwZW5kaW5nX3Byb2dyYW0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcnVuKGIpIHtcbiAgICAgICAgICAgIGlmIChpc19mdW5jdGlvbihjb25maWcpKSB7XG4gICAgICAgICAgICAgICAgd2FpdCgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZyA9IGNvbmZpZygpO1xuICAgICAgICAgICAgICAgICAgICBnbyhiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGdvKGIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbmQoKSB7XG4gICAgICAgICAgICBjbGVhcl9hbmltYXRpb24oKTtcbiAgICAgICAgICAgIHJ1bm5pbmdfcHJvZ3JhbSA9IHBlbmRpbmdfcHJvZ3JhbSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBoYW5kbGVfcHJvbWlzZShwcm9taXNlLCBpbmZvKSB7XG4gICAgY29uc3QgdG9rZW4gPSBpbmZvLnRva2VuID0ge307XG4gICAgZnVuY3Rpb24gdXBkYXRlKHR5cGUsIGluZGV4LCBrZXksIHZhbHVlKSB7XG4gICAgICAgIGlmIChpbmZvLnRva2VuICE9PSB0b2tlbilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaW5mby5yZXNvbHZlZCA9IHZhbHVlO1xuICAgICAgICBsZXQgY2hpbGRfY3R4ID0gaW5mby5jdHg7XG4gICAgICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2hpbGRfY3R4ID0gY2hpbGRfY3R4LnNsaWNlKCk7XG4gICAgICAgICAgICBjaGlsZF9jdHhba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJsb2NrID0gdHlwZSAmJiAoaW5mby5jdXJyZW50ID0gdHlwZSkoY2hpbGRfY3R4KTtcbiAgICAgICAgbGV0IG5lZWRzX2ZsdXNoID0gZmFsc2U7XG4gICAgICAgIGlmIChpbmZvLmJsb2NrKSB7XG4gICAgICAgICAgICBpZiAoaW5mby5ibG9ja3MpIHtcbiAgICAgICAgICAgICAgICBpbmZvLmJsb2Nrcy5mb3JFYWNoKChibG9jaywgaSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaW5kZXggJiYgYmxvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwX291dHJvcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbl9vdXQoYmxvY2ssIDEsIDEsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmJsb2Nrc1tpXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrX291dHJvcygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbmZvLmJsb2NrLmQoMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBibG9jay5jKCk7XG4gICAgICAgICAgICB0cmFuc2l0aW9uX2luKGJsb2NrLCAxKTtcbiAgICAgICAgICAgIGJsb2NrLm0oaW5mby5tb3VudCgpLCBpbmZvLmFuY2hvcik7XG4gICAgICAgICAgICBuZWVkc19mbHVzaCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaW5mby5ibG9jayA9IGJsb2NrO1xuICAgICAgICBpZiAoaW5mby5ibG9ja3MpXG4gICAgICAgICAgICBpbmZvLmJsb2Nrc1tpbmRleF0gPSBibG9jaztcbiAgICAgICAgaWYgKG5lZWRzX2ZsdXNoKSB7XG4gICAgICAgICAgICBmbHVzaCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpc19wcm9taXNlKHByb21pc2UpKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRfY29tcG9uZW50ID0gZ2V0X2N1cnJlbnRfY29tcG9uZW50KCk7XG4gICAgICAgIHByb21pc2UudGhlbih2YWx1ZSA9PiB7XG4gICAgICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQoY3VycmVudF9jb21wb25lbnQpO1xuICAgICAgICAgICAgdXBkYXRlKGluZm8udGhlbiwgMSwgaW5mby52YWx1ZSwgdmFsdWUpO1xuICAgICAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KG51bGwpO1xuICAgICAgICB9LCBlcnJvciA9PiB7XG4gICAgICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQoY3VycmVudF9jb21wb25lbnQpO1xuICAgICAgICAgICAgdXBkYXRlKGluZm8uY2F0Y2gsIDIsIGluZm8uZXJyb3IsIGVycm9yKTtcbiAgICAgICAgICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChudWxsKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGlmIHdlIHByZXZpb3VzbHkgaGFkIGEgdGhlbi9jYXRjaCBibG9jaywgZGVzdHJveSBpdFxuICAgICAgICBpZiAoaW5mby5jdXJyZW50ICE9PSBpbmZvLnBlbmRpbmcpIHtcbiAgICAgICAgICAgIHVwZGF0ZShpbmZvLnBlbmRpbmcsIDApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChpbmZvLmN1cnJlbnQgIT09IGluZm8udGhlbikge1xuICAgICAgICAgICAgdXBkYXRlKGluZm8udGhlbiwgMSwgaW5mby52YWx1ZSwgcHJvbWlzZSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpbmZvLnJlc29sdmVkID0gcHJvbWlzZTtcbiAgICB9XG59XG5cbmNvbnN0IGdsb2JhbHMgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiBnbG9iYWwpO1xuXG5mdW5jdGlvbiBkZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApIHtcbiAgICBibG9jay5kKDEpO1xuICAgIGxvb2t1cC5kZWxldGUoYmxvY2sua2V5KTtcbn1cbmZ1bmN0aW9uIG91dHJvX2FuZF9kZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApIHtcbiAgICB0cmFuc2l0aW9uX291dChibG9jaywgMSwgMSwgKCkgPT4ge1xuICAgICAgICBsb29rdXAuZGVsZXRlKGJsb2NrLmtleSk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBmaXhfYW5kX2Rlc3Ryb3lfYmxvY2soYmxvY2ssIGxvb2t1cCkge1xuICAgIGJsb2NrLmYoKTtcbiAgICBkZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApO1xufVxuZnVuY3Rpb24gZml4X2FuZF9vdXRyb19hbmRfZGVzdHJveV9ibG9jayhibG9jaywgbG9va3VwKSB7XG4gICAgYmxvY2suZigpO1xuICAgIG91dHJvX2FuZF9kZXN0cm95X2Jsb2NrKGJsb2NrLCBsb29rdXApO1xufVxuZnVuY3Rpb24gdXBkYXRlX2tleWVkX2VhY2gob2xkX2Jsb2NrcywgZGlydHksIGdldF9rZXksIGR5bmFtaWMsIGN0eCwgbGlzdCwgbG9va3VwLCBub2RlLCBkZXN0cm95LCBjcmVhdGVfZWFjaF9ibG9jaywgbmV4dCwgZ2V0X2NvbnRleHQpIHtcbiAgICBsZXQgbyA9IG9sZF9ibG9ja3MubGVuZ3RoO1xuICAgIGxldCBuID0gbGlzdC5sZW5ndGg7XG4gICAgbGV0IGkgPSBvO1xuICAgIGNvbnN0IG9sZF9pbmRleGVzID0ge307XG4gICAgd2hpbGUgKGktLSlcbiAgICAgICAgb2xkX2luZGV4ZXNbb2xkX2Jsb2Nrc1tpXS5rZXldID0gaTtcbiAgICBjb25zdCBuZXdfYmxvY2tzID0gW107XG4gICAgY29uc3QgbmV3X2xvb2t1cCA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCBkZWx0YXMgPSBuZXcgTWFwKCk7XG4gICAgaSA9IG47XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgICBjb25zdCBjaGlsZF9jdHggPSBnZXRfY29udGV4dChjdHgsIGxpc3QsIGkpO1xuICAgICAgICBjb25zdCBrZXkgPSBnZXRfa2V5KGNoaWxkX2N0eCk7XG4gICAgICAgIGxldCBibG9jayA9IGxvb2t1cC5nZXQoa2V5KTtcbiAgICAgICAgaWYgKCFibG9jaykge1xuICAgICAgICAgICAgYmxvY2sgPSBjcmVhdGVfZWFjaF9ibG9jayhrZXksIGNoaWxkX2N0eCk7XG4gICAgICAgICAgICBibG9jay5jKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZHluYW1pYykge1xuICAgICAgICAgICAgYmxvY2sucChjaGlsZF9jdHgsIGRpcnR5KTtcbiAgICAgICAgfVxuICAgICAgICBuZXdfbG9va3VwLnNldChrZXksIG5ld19ibG9ja3NbaV0gPSBibG9jayk7XG4gICAgICAgIGlmIChrZXkgaW4gb2xkX2luZGV4ZXMpXG4gICAgICAgICAgICBkZWx0YXMuc2V0KGtleSwgTWF0aC5hYnMoaSAtIG9sZF9pbmRleGVzW2tleV0pKTtcbiAgICB9XG4gICAgY29uc3Qgd2lsbF9tb3ZlID0gbmV3IFNldCgpO1xuICAgIGNvbnN0IGRpZF9tb3ZlID0gbmV3IFNldCgpO1xuICAgIGZ1bmN0aW9uIGluc2VydChibG9jaykge1xuICAgICAgICB0cmFuc2l0aW9uX2luKGJsb2NrLCAxKTtcbiAgICAgICAgYmxvY2subShub2RlLCBuZXh0KTtcbiAgICAgICAgbG9va3VwLnNldChibG9jay5rZXksIGJsb2NrKTtcbiAgICAgICAgbmV4dCA9IGJsb2NrLmZpcnN0O1xuICAgICAgICBuLS07XG4gICAgfVxuICAgIHdoaWxlIChvICYmIG4pIHtcbiAgICAgICAgY29uc3QgbmV3X2Jsb2NrID0gbmV3X2Jsb2Nrc1tuIC0gMV07XG4gICAgICAgIGNvbnN0IG9sZF9ibG9jayA9IG9sZF9ibG9ja3NbbyAtIDFdO1xuICAgICAgICBjb25zdCBuZXdfa2V5ID0gbmV3X2Jsb2NrLmtleTtcbiAgICAgICAgY29uc3Qgb2xkX2tleSA9IG9sZF9ibG9jay5rZXk7XG4gICAgICAgIGlmIChuZXdfYmxvY2sgPT09IG9sZF9ibG9jaykge1xuICAgICAgICAgICAgLy8gZG8gbm90aGluZ1xuICAgICAgICAgICAgbmV4dCA9IG5ld19ibG9jay5maXJzdDtcbiAgICAgICAgICAgIG8tLTtcbiAgICAgICAgICAgIG4tLTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghbmV3X2xvb2t1cC5oYXMob2xkX2tleSkpIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBvbGQgYmxvY2tcbiAgICAgICAgICAgIGRlc3Ryb3kob2xkX2Jsb2NrLCBsb29rdXApO1xuICAgICAgICAgICAgby0tO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFsb29rdXAuaGFzKG5ld19rZXkpIHx8IHdpbGxfbW92ZS5oYXMobmV3X2tleSkpIHtcbiAgICAgICAgICAgIGluc2VydChuZXdfYmxvY2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRpZF9tb3ZlLmhhcyhvbGRfa2V5KSkge1xuICAgICAgICAgICAgby0tO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRlbHRhcy5nZXQobmV3X2tleSkgPiBkZWx0YXMuZ2V0KG9sZF9rZXkpKSB7XG4gICAgICAgICAgICBkaWRfbW92ZS5hZGQobmV3X2tleSk7XG4gICAgICAgICAgICBpbnNlcnQobmV3X2Jsb2NrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHdpbGxfbW92ZS5hZGQob2xkX2tleSk7XG4gICAgICAgICAgICBvLS07XG4gICAgICAgIH1cbiAgICB9XG4gICAgd2hpbGUgKG8tLSkge1xuICAgICAgICBjb25zdCBvbGRfYmxvY2sgPSBvbGRfYmxvY2tzW29dO1xuICAgICAgICBpZiAoIW5ld19sb29rdXAuaGFzKG9sZF9ibG9jay5rZXkpKVxuICAgICAgICAgICAgZGVzdHJveShvbGRfYmxvY2ssIGxvb2t1cCk7XG4gICAgfVxuICAgIHdoaWxlIChuKVxuICAgICAgICBpbnNlcnQobmV3X2Jsb2Nrc1tuIC0gMV0pO1xuICAgIHJldHVybiBuZXdfYmxvY2tzO1xufVxuZnVuY3Rpb24gbWVhc3VyZShibG9ja3MpIHtcbiAgICBjb25zdCByZWN0cyA9IHt9O1xuICAgIGxldCBpID0gYmxvY2tzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKVxuICAgICAgICByZWN0c1tibG9ja3NbaV0ua2V5XSA9IGJsb2Nrc1tpXS5ub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiByZWN0cztcbn1cblxuZnVuY3Rpb24gZ2V0X3NwcmVhZF91cGRhdGUobGV2ZWxzLCB1cGRhdGVzKSB7XG4gICAgY29uc3QgdXBkYXRlID0ge307XG4gICAgY29uc3QgdG9fbnVsbF9vdXQgPSB7fTtcbiAgICBjb25zdCBhY2NvdW50ZWRfZm9yID0geyAkJHNjb3BlOiAxIH07XG4gICAgbGV0IGkgPSBsZXZlbHMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgY29uc3QgbyA9IGxldmVsc1tpXTtcbiAgICAgICAgY29uc3QgbiA9IHVwZGF0ZXNbaV07XG4gICAgICAgIGlmIChuKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIG4pKVxuICAgICAgICAgICAgICAgICAgICB0b19udWxsX291dFtrZXldID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG4pIHtcbiAgICAgICAgICAgICAgICBpZiAoIWFjY291bnRlZF9mb3Jba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVba2V5XSA9IG5ba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudGVkX2ZvcltrZXldID0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXZlbHNbaV0gPSBuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbykge1xuICAgICAgICAgICAgICAgIGFjY291bnRlZF9mb3Jba2V5XSA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdG9fbnVsbF9vdXQpIHtcbiAgICAgICAgaWYgKCEoa2V5IGluIHVwZGF0ZSkpXG4gICAgICAgICAgICB1cGRhdGVba2V5XSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZTtcbn1cbmZ1bmN0aW9uIGdldF9zcHJlYWRfb2JqZWN0KHNwcmVhZF9wcm9wcykge1xuICAgIHJldHVybiB0eXBlb2Ygc3ByZWFkX3Byb3BzID09PSAnb2JqZWN0JyAmJiBzcHJlYWRfcHJvcHMgIT09IG51bGwgPyBzcHJlYWRfcHJvcHMgOiB7fTtcbn1cblxuLy8gc291cmNlOiBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9pbmRpY2VzLmh0bWxcbmNvbnN0IGJvb2xlYW5fYXR0cmlidXRlcyA9IG5ldyBTZXQoW1xuICAgICdhbGxvd2Z1bGxzY3JlZW4nLFxuICAgICdhbGxvd3BheW1lbnRyZXF1ZXN0JyxcbiAgICAnYXN5bmMnLFxuICAgICdhdXRvZm9jdXMnLFxuICAgICdhdXRvcGxheScsXG4gICAgJ2NoZWNrZWQnLFxuICAgICdjb250cm9scycsXG4gICAgJ2RlZmF1bHQnLFxuICAgICdkZWZlcicsXG4gICAgJ2Rpc2FibGVkJyxcbiAgICAnZm9ybW5vdmFsaWRhdGUnLFxuICAgICdoaWRkZW4nLFxuICAgICdpc21hcCcsXG4gICAgJ2xvb3AnLFxuICAgICdtdWx0aXBsZScsXG4gICAgJ211dGVkJyxcbiAgICAnbm9tb2R1bGUnLFxuICAgICdub3ZhbGlkYXRlJyxcbiAgICAnb3BlbicsXG4gICAgJ3BsYXlzaW5saW5lJyxcbiAgICAncmVhZG9ubHknLFxuICAgICdyZXF1aXJlZCcsXG4gICAgJ3JldmVyc2VkJyxcbiAgICAnc2VsZWN0ZWQnXG5dKTtcblxuY29uc3QgaW52YWxpZF9hdHRyaWJ1dGVfbmFtZV9jaGFyYWN0ZXIgPSAvW1xccydcIj4vPVxcdXtGREQwfS1cXHV7RkRFRn1cXHV7RkZGRX1cXHV7RkZGRn1cXHV7MUZGRkV9XFx1ezFGRkZGfVxcdXsyRkZGRX1cXHV7MkZGRkZ9XFx1ezNGRkZFfVxcdXszRkZGRn1cXHV7NEZGRkV9XFx1ezRGRkZGfVxcdXs1RkZGRX1cXHV7NUZGRkZ9XFx1ezZGRkZFfVxcdXs2RkZGRn1cXHV7N0ZGRkV9XFx1ezdGRkZGfVxcdXs4RkZGRX1cXHV7OEZGRkZ9XFx1ezlGRkZFfVxcdXs5RkZGRn1cXHV7QUZGRkV9XFx1e0FGRkZGfVxcdXtCRkZGRX1cXHV7QkZGRkZ9XFx1e0NGRkZFfVxcdXtDRkZGRn1cXHV7REZGRkV9XFx1e0RGRkZGfVxcdXtFRkZGRX1cXHV7RUZGRkZ9XFx1e0ZGRkZFfVxcdXtGRkZGRn1cXHV7MTBGRkZFfVxcdXsxMEZGRkZ9XS91O1xuLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjYXR0cmlidXRlcy0yXG4vLyBodHRwczovL2luZnJhLnNwZWMud2hhdHdnLm9yZy8jbm9uY2hhcmFjdGVyXG5mdW5jdGlvbiBzcHJlYWQoYXJncywgY2xhc3Nlc190b19hZGQpIHtcbiAgICBjb25zdCBhdHRyaWJ1dGVzID0gT2JqZWN0LmFzc2lnbih7fSwgLi4uYXJncyk7XG4gICAgaWYgKGNsYXNzZXNfdG9fYWRkKSB7XG4gICAgICAgIGlmIChhdHRyaWJ1dGVzLmNsYXNzID09IG51bGwpIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZXMuY2xhc3MgPSBjbGFzc2VzX3RvX2FkZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZXMuY2xhc3MgKz0gJyAnICsgY2xhc3Nlc190b19hZGQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IHN0ciA9ICcnO1xuICAgIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2gobmFtZSA9PiB7XG4gICAgICAgIGlmIChpbnZhbGlkX2F0dHJpYnV0ZV9uYW1lX2NoYXJhY3Rlci50ZXN0KG5hbWUpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGF0dHJpYnV0ZXNbbmFtZV07XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIHN0ciArPSBcIiBcIiArIG5hbWU7XG4gICAgICAgIGVsc2UgaWYgKGJvb2xlYW5fYXR0cmlidXRlcy5oYXMobmFtZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlKVxuICAgICAgICAgICAgICAgIHN0ciArPSBcIiBcIiArIG5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgc3RyICs9IGAgJHtuYW1lfT1cIiR7U3RyaW5nKHZhbHVlKS5yZXBsYWNlKC9cIi9nLCAnJiMzNDsnKS5yZXBsYWNlKC8nL2csICcmIzM5OycpfVwiYDtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBzdHI7XG59XG5jb25zdCBlc2NhcGVkID0ge1xuICAgICdcIic6ICcmcXVvdDsnLFxuICAgIFwiJ1wiOiAnJiMzOTsnLFxuICAgICcmJzogJyZhbXA7JyxcbiAgICAnPCc6ICcmbHQ7JyxcbiAgICAnPic6ICcmZ3Q7J1xufTtcbmZ1bmN0aW9uIGVzY2FwZShodG1sKSB7XG4gICAgcmV0dXJuIFN0cmluZyhodG1sKS5yZXBsYWNlKC9bXCInJjw+XS9nLCBtYXRjaCA9PiBlc2NhcGVkW21hdGNoXSk7XG59XG5mdW5jdGlvbiBlYWNoKGl0ZW1zLCBmbikge1xuICAgIGxldCBzdHIgPSAnJztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIHN0ciArPSBmbihpdGVtc1tpXSwgaSk7XG4gICAgfVxuICAgIHJldHVybiBzdHI7XG59XG5jb25zdCBtaXNzaW5nX2NvbXBvbmVudCA9IHtcbiAgICAkJHJlbmRlcjogKCkgPT4gJydcbn07XG5mdW5jdGlvbiB2YWxpZGF0ZV9jb21wb25lbnQoY29tcG9uZW50LCBuYW1lKSB7XG4gICAgaWYgKCFjb21wb25lbnQgfHwgIWNvbXBvbmVudC4kJHJlbmRlcikge1xuICAgICAgICBpZiAobmFtZSA9PT0gJ3N2ZWx0ZTpjb21wb25lbnQnKVxuICAgICAgICAgICAgbmFtZSArPSAnIHRoaXM9ey4uLn0nO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYDwke25hbWV9PiBpcyBub3QgYSB2YWxpZCBTU1IgY29tcG9uZW50LiBZb3UgbWF5IG5lZWQgdG8gcmV2aWV3IHlvdXIgYnVpbGQgY29uZmlnIHRvIGVuc3VyZSB0aGF0IGRlcGVuZGVuY2llcyBhcmUgY29tcGlsZWQsIHJhdGhlciB0aGFuIGltcG9ydGVkIGFzIHByZS1jb21waWxlZCBtb2R1bGVzYCk7XG4gICAgfVxuICAgIHJldHVybiBjb21wb25lbnQ7XG59XG5mdW5jdGlvbiBkZWJ1ZyhmaWxlLCBsaW5lLCBjb2x1bW4sIHZhbHVlcykge1xuICAgIGNvbnNvbGUubG9nKGB7QGRlYnVnfSAke2ZpbGUgPyBmaWxlICsgJyAnIDogJyd9KCR7bGluZX06JHtjb2x1bW59KWApOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLmxvZyh2YWx1ZXMpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICByZXR1cm4gJyc7XG59XG5sZXQgb25fZGVzdHJveTtcbmZ1bmN0aW9uIGNyZWF0ZV9zc3JfY29tcG9uZW50KGZuKSB7XG4gICAgZnVuY3Rpb24gJCRyZW5kZXIocmVzdWx0LCBwcm9wcywgYmluZGluZ3MsIHNsb3RzKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudF9jb21wb25lbnQgPSBjdXJyZW50X2NvbXBvbmVudDtcbiAgICAgICAgY29uc3QgJCQgPSB7XG4gICAgICAgICAgICBvbl9kZXN0cm95LFxuICAgICAgICAgICAgY29udGV4dDogbmV3IE1hcChwYXJlbnRfY29tcG9uZW50ID8gcGFyZW50X2NvbXBvbmVudC4kJC5jb250ZXh0IDogW10pLFxuICAgICAgICAgICAgLy8gdGhlc2Ugd2lsbCBiZSBpbW1lZGlhdGVseSBkaXNjYXJkZWRcbiAgICAgICAgICAgIG9uX21vdW50OiBbXSxcbiAgICAgICAgICAgIGJlZm9yZV91cGRhdGU6IFtdLFxuICAgICAgICAgICAgYWZ0ZXJfdXBkYXRlOiBbXSxcbiAgICAgICAgICAgIGNhbGxiYWNrczogYmxhbmtfb2JqZWN0KClcbiAgICAgICAgfTtcbiAgICAgICAgc2V0X2N1cnJlbnRfY29tcG9uZW50KHsgJCQgfSk7XG4gICAgICAgIGNvbnN0IGh0bWwgPSBmbihyZXN1bHQsIHByb3BzLCBiaW5kaW5ncywgc2xvdHMpO1xuICAgICAgICBzZXRfY3VycmVudF9jb21wb25lbnQocGFyZW50X2NvbXBvbmVudCk7XG4gICAgICAgIHJldHVybiBodG1sO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICByZW5kZXI6IChwcm9wcyA9IHt9LCBvcHRpb25zID0ge30pID0+IHtcbiAgICAgICAgICAgIG9uX2Rlc3Ryb3kgPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHsgdGl0bGU6ICcnLCBoZWFkOiAnJywgY3NzOiBuZXcgU2V0KCkgfTtcbiAgICAgICAgICAgIGNvbnN0IGh0bWwgPSAkJHJlbmRlcihyZXN1bHQsIHByb3BzLCB7fSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBydW5fYWxsKG9uX2Rlc3Ryb3kpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBodG1sLFxuICAgICAgICAgICAgICAgIGNzczoge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBBcnJheS5mcm9tKHJlc3VsdC5jc3MpLm1hcChjc3MgPT4gY3NzLmNvZGUpLmpvaW4oJ1xcbicpLFxuICAgICAgICAgICAgICAgICAgICBtYXA6IG51bGwgLy8gVE9ET1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaGVhZDogcmVzdWx0LnRpdGxlICsgcmVzdWx0LmhlYWRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgICQkcmVuZGVyXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGFkZF9hdHRyaWJ1dGUobmFtZSwgdmFsdWUsIGJvb2xlYW4pIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCB8fCAoYm9vbGVhbiAmJiAhdmFsdWUpKVxuICAgICAgICByZXR1cm4gJyc7XG4gICAgcmV0dXJuIGAgJHtuYW1lfSR7dmFsdWUgPT09IHRydWUgPyAnJyA6IGA9JHt0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gSlNPTi5zdHJpbmdpZnkoZXNjYXBlKHZhbHVlKSkgOiBgXCIke3ZhbHVlfVwiYH1gfWA7XG59XG5mdW5jdGlvbiBhZGRfY2xhc3NlcyhjbGFzc2VzKSB7XG4gICAgcmV0dXJuIGNsYXNzZXMgPyBgIGNsYXNzPVwiJHtjbGFzc2VzfVwiYCA6IGBgO1xufVxuXG5mdW5jdGlvbiBiaW5kKGNvbXBvbmVudCwgbmFtZSwgY2FsbGJhY2spIHtcbiAgICBjb25zdCBpbmRleCA9IGNvbXBvbmVudC4kJC5wcm9wc1tuYW1lXTtcbiAgICBpZiAoaW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb21wb25lbnQuJCQuYm91bmRbaW5kZXhdID0gY2FsbGJhY2s7XG4gICAgICAgIGNhbGxiYWNrKGNvbXBvbmVudC4kJC5jdHhbaW5kZXhdKTtcbiAgICB9XG59XG5mdW5jdGlvbiBjcmVhdGVfY29tcG9uZW50KGJsb2NrKSB7XG4gICAgYmxvY2sgJiYgYmxvY2suYygpO1xufVxuZnVuY3Rpb24gY2xhaW1fY29tcG9uZW50KGJsb2NrLCBwYXJlbnRfbm9kZXMpIHtcbiAgICBibG9jayAmJiBibG9jay5sKHBhcmVudF9ub2Rlcyk7XG59XG5mdW5jdGlvbiBtb3VudF9jb21wb25lbnQoY29tcG9uZW50LCB0YXJnZXQsIGFuY2hvcikge1xuICAgIGNvbnN0IHsgZnJhZ21lbnQsIG9uX21vdW50LCBvbl9kZXN0cm95LCBhZnRlcl91cGRhdGUgfSA9IGNvbXBvbmVudC4kJDtcbiAgICBmcmFnbWVudCAmJiBmcmFnbWVudC5tKHRhcmdldCwgYW5jaG9yKTtcbiAgICAvLyBvbk1vdW50IGhhcHBlbnMgYmVmb3JlIHRoZSBpbml0aWFsIGFmdGVyVXBkYXRlXG4gICAgYWRkX3JlbmRlcl9jYWxsYmFjaygoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld19vbl9kZXN0cm95ID0gb25fbW91bnQubWFwKHJ1bikuZmlsdGVyKGlzX2Z1bmN0aW9uKTtcbiAgICAgICAgaWYgKG9uX2Rlc3Ryb3kpIHtcbiAgICAgICAgICAgIG9uX2Rlc3Ryb3kucHVzaCguLi5uZXdfb25fZGVzdHJveSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBFZGdlIGNhc2UgLSBjb21wb25lbnQgd2FzIGRlc3Ryb3llZCBpbW1lZGlhdGVseSxcbiAgICAgICAgICAgIC8vIG1vc3QgbGlrZWx5IGFzIGEgcmVzdWx0IG9mIGEgYmluZGluZyBpbml0aWFsaXNpbmdcbiAgICAgICAgICAgIHJ1bl9hbGwobmV3X29uX2Rlc3Ryb3kpO1xuICAgICAgICB9XG4gICAgICAgIGNvbXBvbmVudC4kJC5vbl9tb3VudCA9IFtdO1xuICAgIH0pO1xuICAgIGFmdGVyX3VwZGF0ZS5mb3JFYWNoKGFkZF9yZW5kZXJfY2FsbGJhY2spO1xufVxuZnVuY3Rpb24gZGVzdHJveV9jb21wb25lbnQoY29tcG9uZW50LCBkZXRhY2hpbmcpIHtcbiAgICBjb25zdCAkJCA9IGNvbXBvbmVudC4kJDtcbiAgICBpZiAoJCQuZnJhZ21lbnQgIT09IG51bGwpIHtcbiAgICAgICAgcnVuX2FsbCgkJC5vbl9kZXN0cm95KTtcbiAgICAgICAgJCQuZnJhZ21lbnQgJiYgJCQuZnJhZ21lbnQuZChkZXRhY2hpbmcpO1xuICAgICAgICAvLyBUT0RPIG51bGwgb3V0IG90aGVyIHJlZnMsIGluY2x1ZGluZyBjb21wb25lbnQuJCQgKGJ1dCBuZWVkIHRvXG4gICAgICAgIC8vIHByZXNlcnZlIGZpbmFsIHN0YXRlPylcbiAgICAgICAgJCQub25fZGVzdHJveSA9ICQkLmZyYWdtZW50ID0gbnVsbDtcbiAgICAgICAgJCQuY3R4ID0gW107XG4gICAgfVxufVxuZnVuY3Rpb24gbWFrZV9kaXJ0eShjb21wb25lbnQsIGkpIHtcbiAgICBpZiAoY29tcG9uZW50LiQkLmRpcnR5WzBdID09PSAtMSkge1xuICAgICAgICBkaXJ0eV9jb21wb25lbnRzLnB1c2goY29tcG9uZW50KTtcbiAgICAgICAgc2NoZWR1bGVfdXBkYXRlKCk7XG4gICAgICAgIGNvbXBvbmVudC4kJC5kaXJ0eS5maWxsKDApO1xuICAgIH1cbiAgICBjb21wb25lbnQuJCQuZGlydHlbKGkgLyAzMSkgfCAwXSB8PSAoMSA8PCAoaSAlIDMxKSk7XG59XG5mdW5jdGlvbiBpbml0KGNvbXBvbmVudCwgb3B0aW9ucywgaW5zdGFuY2UsIGNyZWF0ZV9mcmFnbWVudCwgbm90X2VxdWFsLCBwcm9wcywgZGlydHkgPSBbLTFdKSB7XG4gICAgY29uc3QgcGFyZW50X2NvbXBvbmVudCA9IGN1cnJlbnRfY29tcG9uZW50O1xuICAgIHNldF9jdXJyZW50X2NvbXBvbmVudChjb21wb25lbnQpO1xuICAgIGNvbnN0IHByb3BfdmFsdWVzID0gb3B0aW9ucy5wcm9wcyB8fCB7fTtcbiAgICBjb25zdCAkJCA9IGNvbXBvbmVudC4kJCA9IHtcbiAgICAgICAgZnJhZ21lbnQ6IG51bGwsXG4gICAgICAgIGN0eDogbnVsbCxcbiAgICAgICAgLy8gc3RhdGVcbiAgICAgICAgcHJvcHMsXG4gICAgICAgIHVwZGF0ZTogbm9vcCxcbiAgICAgICAgbm90X2VxdWFsLFxuICAgICAgICBib3VuZDogYmxhbmtfb2JqZWN0KCksXG4gICAgICAgIC8vIGxpZmVjeWNsZVxuICAgICAgICBvbl9tb3VudDogW10sXG4gICAgICAgIG9uX2Rlc3Ryb3k6IFtdLFxuICAgICAgICBiZWZvcmVfdXBkYXRlOiBbXSxcbiAgICAgICAgYWZ0ZXJfdXBkYXRlOiBbXSxcbiAgICAgICAgY29udGV4dDogbmV3IE1hcChwYXJlbnRfY29tcG9uZW50ID8gcGFyZW50X2NvbXBvbmVudC4kJC5jb250ZXh0IDogW10pLFxuICAgICAgICAvLyBldmVyeXRoaW5nIGVsc2VcbiAgICAgICAgY2FsbGJhY2tzOiBibGFua19vYmplY3QoKSxcbiAgICAgICAgZGlydHlcbiAgICB9O1xuICAgIGxldCByZWFkeSA9IGZhbHNlO1xuICAgICQkLmN0eCA9IGluc3RhbmNlXG4gICAgICAgID8gaW5zdGFuY2UoY29tcG9uZW50LCBwcm9wX3ZhbHVlcywgKGksIHJldCwgLi4ucmVzdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSByZXN0Lmxlbmd0aCA/IHJlc3RbMF0gOiByZXQ7XG4gICAgICAgICAgICBpZiAoJCQuY3R4ICYmIG5vdF9lcXVhbCgkJC5jdHhbaV0sICQkLmN0eFtpXSA9IHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGlmICgkJC5ib3VuZFtpXSlcbiAgICAgICAgICAgICAgICAgICAgJCQuYm91bmRbaV0odmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChyZWFkeSlcbiAgICAgICAgICAgICAgICAgICAgbWFrZV9kaXJ0eShjb21wb25lbnQsIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfSlcbiAgICAgICAgOiBbXTtcbiAgICAkJC51cGRhdGUoKTtcbiAgICByZWFkeSA9IHRydWU7XG4gICAgcnVuX2FsbCgkJC5iZWZvcmVfdXBkYXRlKTtcbiAgICAvLyBgZmFsc2VgIGFzIGEgc3BlY2lhbCBjYXNlIG9mIG5vIERPTSBjb21wb25lbnRcbiAgICAkJC5mcmFnbWVudCA9IGNyZWF0ZV9mcmFnbWVudCA/IGNyZWF0ZV9mcmFnbWVudCgkJC5jdHgpIDogZmFsc2U7XG4gICAgaWYgKG9wdGlvbnMudGFyZ2V0KSB7XG4gICAgICAgIGlmIChvcHRpb25zLmh5ZHJhdGUpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICAkJC5mcmFnbWVudCAmJiAkJC5mcmFnbWVudC5sKGNoaWxkcmVuKG9wdGlvbnMudGFyZ2V0KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgJCQuZnJhZ21lbnQgJiYgJCQuZnJhZ21lbnQuYygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmludHJvKVxuICAgICAgICAgICAgdHJhbnNpdGlvbl9pbihjb21wb25lbnQuJCQuZnJhZ21lbnQpO1xuICAgICAgICBtb3VudF9jb21wb25lbnQoY29tcG9uZW50LCBvcHRpb25zLnRhcmdldCwgb3B0aW9ucy5hbmNob3IpO1xuICAgICAgICBmbHVzaCgpO1xuICAgIH1cbiAgICBzZXRfY3VycmVudF9jb21wb25lbnQocGFyZW50X2NvbXBvbmVudCk7XG59XG5sZXQgU3ZlbHRlRWxlbWVudDtcbmlmICh0eXBlb2YgSFRNTEVsZW1lbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICBTdmVsdGVFbGVtZW50ID0gY2xhc3MgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgICAgIHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSB0b2RvOiBpbXByb3ZlIHR5cGluZ3NcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuJCQuc2xvdHRlZCkge1xuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgdG9kbzogaW1wcm92ZSB0eXBpbmdzXG4gICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRDaGlsZCh0aGlzLiQkLnNsb3R0ZWRba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGF0dHIsIF9vbGRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXNbYXR0cl0gPSBuZXdWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICAkZGVzdHJveSgpIHtcbiAgICAgICAgICAgIGRlc3Ryb3lfY29tcG9uZW50KHRoaXMsIDEpO1xuICAgICAgICAgICAgdGhpcy4kZGVzdHJveSA9IG5vb3A7XG4gICAgICAgIH1cbiAgICAgICAgJG9uKHR5cGUsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAvLyBUT0RPIHNob3VsZCB0aGlzIGRlbGVnYXRlIHRvIGFkZEV2ZW50TGlzdGVuZXI/XG4gICAgICAgICAgICBjb25zdCBjYWxsYmFja3MgPSAodGhpcy4kJC5jYWxsYmFja3NbdHlwZV0gfHwgKHRoaXMuJCQuY2FsbGJhY2tzW3R5cGVdID0gW10pKTtcbiAgICAgICAgICAgIGNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBjYWxsYmFja3MuaW5kZXhPZihjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSlcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgICRzZXQoKSB7XG4gICAgICAgICAgICAvLyBvdmVycmlkZGVuIGJ5IGluc3RhbmNlLCBpZiBpdCBoYXMgcHJvcHNcbiAgICAgICAgfVxuICAgIH07XG59XG5jbGFzcyBTdmVsdGVDb21wb25lbnQge1xuICAgICRkZXN0cm95KCkge1xuICAgICAgICBkZXN0cm95X2NvbXBvbmVudCh0aGlzLCAxKTtcbiAgICAgICAgdGhpcy4kZGVzdHJveSA9IG5vb3A7XG4gICAgfVxuICAgICRvbih0eXBlLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSAodGhpcy4kJC5jYWxsYmFja3NbdHlwZV0gfHwgKHRoaXMuJCQuY2FsbGJhY2tzW3R5cGVdID0gW10pKTtcbiAgICAgICAgY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBjYWxsYmFja3MuaW5kZXhPZihjYWxsYmFjayk7XG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAkc2V0KCkge1xuICAgICAgICAvLyBvdmVycmlkZGVuIGJ5IGluc3RhbmNlLCBpZiBpdCBoYXMgcHJvcHNcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRpc3BhdGNoX2Rldih0eXBlLCBkZXRhaWwpIHtcbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGN1c3RvbV9ldmVudCh0eXBlLCBPYmplY3QuYXNzaWduKHsgdmVyc2lvbjogJzMuMTcuMScgfSwgZGV0YWlsKSkpO1xufVxuZnVuY3Rpb24gYXBwZW5kX2Rldih0YXJnZXQsIG5vZGUpIHtcbiAgICBkaXNwYXRjaF9kZXYoXCJTdmVsdGVET01JbnNlcnRcIiwgeyB0YXJnZXQsIG5vZGUgfSk7XG4gICAgYXBwZW5kKHRhcmdldCwgbm9kZSk7XG59XG5mdW5jdGlvbiBpbnNlcnRfZGV2KHRhcmdldCwgbm9kZSwgYW5jaG9yKSB7XG4gICAgZGlzcGF0Y2hfZGV2KFwiU3ZlbHRlRE9NSW5zZXJ0XCIsIHsgdGFyZ2V0LCBub2RlLCBhbmNob3IgfSk7XG4gICAgaW5zZXJ0KHRhcmdldCwgbm9kZSwgYW5jaG9yKTtcbn1cbmZ1bmN0aW9uIGRldGFjaF9kZXYobm9kZSkge1xuICAgIGRpc3BhdGNoX2RldihcIlN2ZWx0ZURPTVJlbW92ZVwiLCB7IG5vZGUgfSk7XG4gICAgZGV0YWNoKG5vZGUpO1xufVxuZnVuY3Rpb24gZGV0YWNoX2JldHdlZW5fZGV2KGJlZm9yZSwgYWZ0ZXIpIHtcbiAgICB3aGlsZSAoYmVmb3JlLm5leHRTaWJsaW5nICYmIGJlZm9yZS5uZXh0U2libGluZyAhPT0gYWZ0ZXIpIHtcbiAgICAgICAgZGV0YWNoX2RldihiZWZvcmUubmV4dFNpYmxpbmcpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRldGFjaF9iZWZvcmVfZGV2KGFmdGVyKSB7XG4gICAgd2hpbGUgKGFmdGVyLnByZXZpb3VzU2libGluZykge1xuICAgICAgICBkZXRhY2hfZGV2KGFmdGVyLnByZXZpb3VzU2libGluZyk7XG4gICAgfVxufVxuZnVuY3Rpb24gZGV0YWNoX2FmdGVyX2RldihiZWZvcmUpIHtcbiAgICB3aGlsZSAoYmVmb3JlLm5leHRTaWJsaW5nKSB7XG4gICAgICAgIGRldGFjaF9kZXYoYmVmb3JlLm5leHRTaWJsaW5nKTtcbiAgICB9XG59XG5mdW5jdGlvbiBsaXN0ZW5fZGV2KG5vZGUsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zLCBoYXNfcHJldmVudF9kZWZhdWx0LCBoYXNfc3RvcF9wcm9wYWdhdGlvbikge1xuICAgIGNvbnN0IG1vZGlmaWVycyA9IG9wdGlvbnMgPT09IHRydWUgPyBbXCJjYXB0dXJlXCJdIDogb3B0aW9ucyA/IEFycmF5LmZyb20oT2JqZWN0LmtleXMob3B0aW9ucykpIDogW107XG4gICAgaWYgKGhhc19wcmV2ZW50X2RlZmF1bHQpXG4gICAgICAgIG1vZGlmaWVycy5wdXNoKCdwcmV2ZW50RGVmYXVsdCcpO1xuICAgIGlmIChoYXNfc3RvcF9wcm9wYWdhdGlvbilcbiAgICAgICAgbW9kaWZpZXJzLnB1c2goJ3N0b3BQcm9wYWdhdGlvbicpO1xuICAgIGRpc3BhdGNoX2RldihcIlN2ZWx0ZURPTUFkZEV2ZW50TGlzdGVuZXJcIiwgeyBub2RlLCBldmVudCwgaGFuZGxlciwgbW9kaWZpZXJzIH0pO1xuICAgIGNvbnN0IGRpc3Bvc2UgPSBsaXN0ZW4obm9kZSwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGRpc3BhdGNoX2RldihcIlN2ZWx0ZURPTVJlbW92ZUV2ZW50TGlzdGVuZXJcIiwgeyBub2RlLCBldmVudCwgaGFuZGxlciwgbW9kaWZpZXJzIH0pO1xuICAgICAgICBkaXNwb3NlKCk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGF0dHJfZGV2KG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUpIHtcbiAgICBhdHRyKG5vZGUsIGF0dHJpYnV0ZSwgdmFsdWUpO1xuICAgIGlmICh2YWx1ZSA9PSBudWxsKVxuICAgICAgICBkaXNwYXRjaF9kZXYoXCJTdmVsdGVET01SZW1vdmVBdHRyaWJ1dGVcIiwgeyBub2RlLCBhdHRyaWJ1dGUgfSk7XG4gICAgZWxzZVxuICAgICAgICBkaXNwYXRjaF9kZXYoXCJTdmVsdGVET01TZXRBdHRyaWJ1dGVcIiwgeyBub2RlLCBhdHRyaWJ1dGUsIHZhbHVlIH0pO1xufVxuZnVuY3Rpb24gcHJvcF9kZXYobm9kZSwgcHJvcGVydHksIHZhbHVlKSB7XG4gICAgbm9kZVtwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICBkaXNwYXRjaF9kZXYoXCJTdmVsdGVET01TZXRQcm9wZXJ0eVwiLCB7IG5vZGUsIHByb3BlcnR5LCB2YWx1ZSB9KTtcbn1cbmZ1bmN0aW9uIGRhdGFzZXRfZGV2KG5vZGUsIHByb3BlcnR5LCB2YWx1ZSkge1xuICAgIG5vZGUuZGF0YXNldFtwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICBkaXNwYXRjaF9kZXYoXCJTdmVsdGVET01TZXREYXRhc2V0XCIsIHsgbm9kZSwgcHJvcGVydHksIHZhbHVlIH0pO1xufVxuZnVuY3Rpb24gc2V0X2RhdGFfZGV2KHRleHQsIGRhdGEpIHtcbiAgICBkYXRhID0gJycgKyBkYXRhO1xuICAgIGlmICh0ZXh0LmRhdGEgPT09IGRhdGEpXG4gICAgICAgIHJldHVybjtcbiAgICBkaXNwYXRjaF9kZXYoXCJTdmVsdGVET01TZXREYXRhXCIsIHsgbm9kZTogdGV4dCwgZGF0YSB9KTtcbiAgICB0ZXh0LmRhdGEgPSBkYXRhO1xufVxuY2xhc3MgU3ZlbHRlQ29tcG9uZW50RGV2IGV4dGVuZHMgU3ZlbHRlQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucyB8fCAoIW9wdGlvbnMudGFyZ2V0ICYmICFvcHRpb25zLiQkaW5saW5lKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAndGFyZ2V0JyBpcyBhIHJlcXVpcmVkIG9wdGlvbmApO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKCk7XG4gICAgfVxuICAgICRkZXN0cm95KCkge1xuICAgICAgICBzdXBlci4kZGVzdHJveSgpO1xuICAgICAgICB0aGlzLiRkZXN0cm95ID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBDb21wb25lbnQgd2FzIGFscmVhZHkgZGVzdHJveWVkYCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICAgICAgICB9O1xuICAgIH1cbn1cbmZ1bmN0aW9uIGxvb3BfZ3VhcmQodGltZW91dCkge1xuICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIHN0YXJ0ID4gdGltZW91dCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbmZpbml0ZSBsb29wIGRldGVjdGVkYCk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5leHBvcnQgeyBIdG1sVGFnLCBTdmVsdGVDb21wb25lbnQsIFN2ZWx0ZUNvbXBvbmVudERldiwgU3ZlbHRlRWxlbWVudCwgYWN0aW9uX2Rlc3Ryb3llciwgYWRkX2F0dHJpYnV0ZSwgYWRkX2NsYXNzZXMsIGFkZF9mbHVzaF9jYWxsYmFjaywgYWRkX2xvY2F0aW9uLCBhZGRfcmVuZGVyX2NhbGxiYWNrLCBhZGRfcmVzaXplX2xpc3RlbmVyLCBhZGRfdHJhbnNmb3JtLCBhZnRlclVwZGF0ZSwgYXBwZW5kLCBhcHBlbmRfZGV2LCBhc3NpZ24sIGF0dHIsIGF0dHJfZGV2LCBiZWZvcmVVcGRhdGUsIGJpbmQsIGJpbmRpbmdfY2FsbGJhY2tzLCBibGFua19vYmplY3QsIGJ1YmJsZSwgY2hlY2tfb3V0cm9zLCBjaGlsZHJlbiwgY2xhaW1fY29tcG9uZW50LCBjbGFpbV9lbGVtZW50LCBjbGFpbV9zcGFjZSwgY2xhaW1fdGV4dCwgY2xlYXJfbG9vcHMsIGNvbXBvbmVudF9zdWJzY3JpYmUsIGNyZWF0ZUV2ZW50RGlzcGF0Y2hlciwgY3JlYXRlX2FuaW1hdGlvbiwgY3JlYXRlX2JpZGlyZWN0aW9uYWxfdHJhbnNpdGlvbiwgY3JlYXRlX2NvbXBvbmVudCwgY3JlYXRlX2luX3RyYW5zaXRpb24sIGNyZWF0ZV9vdXRfdHJhbnNpdGlvbiwgY3JlYXRlX3Nsb3QsIGNyZWF0ZV9zc3JfY29tcG9uZW50LCBjdXJyZW50X2NvbXBvbmVudCwgY3VzdG9tX2V2ZW50LCBkYXRhc2V0X2RldiwgZGVidWcsIGRlc3Ryb3lfYmxvY2ssIGRlc3Ryb3lfY29tcG9uZW50LCBkZXN0cm95X2VhY2gsIGRldGFjaCwgZGV0YWNoX2FmdGVyX2RldiwgZGV0YWNoX2JlZm9yZV9kZXYsIGRldGFjaF9iZXR3ZWVuX2RldiwgZGV0YWNoX2RldiwgZGlydHlfY29tcG9uZW50cywgZGlzcGF0Y2hfZGV2LCBlYWNoLCBlbGVtZW50LCBlbGVtZW50X2lzLCBlbXB0eSwgZXNjYXBlLCBlc2NhcGVkLCBleGNsdWRlX2ludGVybmFsX3Byb3BzLCBmaXhfYW5kX2Rlc3Ryb3lfYmxvY2ssIGZpeF9hbmRfb3V0cm9fYW5kX2Rlc3Ryb3lfYmxvY2ssIGZpeF9wb3NpdGlvbiwgZmx1c2gsIGdldENvbnRleHQsIGdldF9iaW5kaW5nX2dyb3VwX3ZhbHVlLCBnZXRfY3VycmVudF9jb21wb25lbnQsIGdldF9zbG90X2NoYW5nZXMsIGdldF9zbG90X2NvbnRleHQsIGdldF9zcHJlYWRfb2JqZWN0LCBnZXRfc3ByZWFkX3VwZGF0ZSwgZ2V0X3N0b3JlX3ZhbHVlLCBnbG9iYWxzLCBncm91cF9vdXRyb3MsIGhhbmRsZV9wcm9taXNlLCBoYXNfcHJvcCwgaWRlbnRpdHksIGluaXQsIGluc2VydCwgaW5zZXJ0X2RldiwgaW50cm9zLCBpbnZhbGlkX2F0dHJpYnV0ZV9uYW1lX2NoYXJhY3RlciwgaXNfY2xpZW50LCBpc19mdW5jdGlvbiwgaXNfcHJvbWlzZSwgbGlzdGVuLCBsaXN0ZW5fZGV2LCBsb29wLCBsb29wX2d1YXJkLCBtZWFzdXJlLCBtaXNzaW5nX2NvbXBvbmVudCwgbW91bnRfY29tcG9uZW50LCBub29wLCBub3RfZXF1YWwsIG5vdywgbnVsbF90b19lbXB0eSwgb2JqZWN0X3dpdGhvdXRfcHJvcGVydGllcywgb25EZXN0cm95LCBvbk1vdW50LCBvbmNlLCBvdXRyb19hbmRfZGVzdHJveV9ibG9jaywgcHJldmVudF9kZWZhdWx0LCBwcm9wX2RldiwgcXVlcnlfc2VsZWN0b3JfYWxsLCByYWYsIHJ1biwgcnVuX2FsbCwgc2FmZV9ub3RfZXF1YWwsIHNjaGVkdWxlX3VwZGF0ZSwgc2VsZWN0X211bHRpcGxlX3ZhbHVlLCBzZWxlY3Rfb3B0aW9uLCBzZWxlY3Rfb3B0aW9ucywgc2VsZWN0X3ZhbHVlLCBzZWxmLCBzZXRDb250ZXh0LCBzZXRfYXR0cmlidXRlcywgc2V0X2N1cnJlbnRfY29tcG9uZW50LCBzZXRfY3VzdG9tX2VsZW1lbnRfZGF0YSwgc2V0X2RhdGEsIHNldF9kYXRhX2Rldiwgc2V0X2lucHV0X3R5cGUsIHNldF9pbnB1dF92YWx1ZSwgc2V0X25vdywgc2V0X3JhZiwgc2V0X3N0b3JlX3ZhbHVlLCBzZXRfc3R5bGUsIHNldF9zdmdfYXR0cmlidXRlcywgc3BhY2UsIHNwcmVhZCwgc3RvcF9wcm9wYWdhdGlvbiwgc3Vic2NyaWJlLCBzdmdfZWxlbWVudCwgdGV4dCwgdGljaywgdGltZV9yYW5nZXNfdG9fYXJyYXksIHRvX251bWJlciwgdG9nZ2xlX2NsYXNzLCB0cmFuc2l0aW9uX2luLCB0cmFuc2l0aW9uX291dCwgdXBkYXRlX2tleWVkX2VhY2gsIHZhbGlkYXRlX2NvbXBvbmVudCwgdmFsaWRhdGVfc3RvcmUsIHhsaW5rX2F0dHIgfTtcbiIsImltcG9ydCB7IG5vb3AsIHNhZmVfbm90X2VxdWFsLCBydW5fYWxsLCBpc19mdW5jdGlvbiB9IGZyb20gJy4uL2ludGVybmFsJztcbmV4cG9ydCB7IGdldF9zdG9yZV92YWx1ZSBhcyBnZXQgfSBmcm9tICcuLi9pbnRlcm5hbCc7XG5cbmNvbnN0IHN1YnNjcmliZXJfcXVldWUgPSBbXTtcbi8qKlxuICogQ3JlYXRlcyBhIGBSZWFkYWJsZWAgc3RvcmUgdGhhdCBhbGxvd3MgcmVhZGluZyBieSBzdWJzY3JpcHRpb24uXG4gKiBAcGFyYW0gdmFsdWUgaW5pdGlhbCB2YWx1ZVxuICogQHBhcmFtIHtTdGFydFN0b3BOb3RpZmllcn1zdGFydCBzdGFydCBhbmQgc3RvcCBub3RpZmljYXRpb25zIGZvciBzdWJzY3JpcHRpb25zXG4gKi9cbmZ1bmN0aW9uIHJlYWRhYmxlKHZhbHVlLCBzdGFydCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHN1YnNjcmliZTogd3JpdGFibGUodmFsdWUsIHN0YXJ0KS5zdWJzY3JpYmUsXG4gICAgfTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgYFdyaXRhYmxlYCBzdG9yZSB0aGF0IGFsbG93cyBib3RoIHVwZGF0aW5nIGFuZCByZWFkaW5nIGJ5IHN1YnNjcmlwdGlvbi5cbiAqIEBwYXJhbSB7Kj19dmFsdWUgaW5pdGlhbCB2YWx1ZVxuICogQHBhcmFtIHtTdGFydFN0b3BOb3RpZmllcj19c3RhcnQgc3RhcnQgYW5kIHN0b3Agbm90aWZpY2F0aW9ucyBmb3Igc3Vic2NyaXB0aW9uc1xuICovXG5mdW5jdGlvbiB3cml0YWJsZSh2YWx1ZSwgc3RhcnQgPSBub29wKSB7XG4gICAgbGV0IHN0b3A7XG4gICAgY29uc3Qgc3Vic2NyaWJlcnMgPSBbXTtcbiAgICBmdW5jdGlvbiBzZXQobmV3X3ZhbHVlKSB7XG4gICAgICAgIGlmIChzYWZlX25vdF9lcXVhbCh2YWx1ZSwgbmV3X3ZhbHVlKSkge1xuICAgICAgICAgICAgdmFsdWUgPSBuZXdfdmFsdWU7XG4gICAgICAgICAgICBpZiAoc3RvcCkgeyAvLyBzdG9yZSBpcyByZWFkeVxuICAgICAgICAgICAgICAgIGNvbnN0IHJ1bl9xdWV1ZSA9ICFzdWJzY3JpYmVyX3F1ZXVlLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN1YnNjcmliZXJzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBzdWJzY3JpYmVyc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgc1sxXSgpO1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyX3F1ZXVlLnB1c2gocywgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocnVuX3F1ZXVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3Vic2NyaWJlcl9xdWV1ZS5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlcl9xdWV1ZVtpXVswXShzdWJzY3JpYmVyX3F1ZXVlW2kgKyAxXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlcl9xdWV1ZS5sZW5ndGggPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGUoZm4pIHtcbiAgICAgICAgc2V0KGZuKHZhbHVlKSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHN1YnNjcmliZShydW4sIGludmFsaWRhdGUgPSBub29wKSB7XG4gICAgICAgIGNvbnN0IHN1YnNjcmliZXIgPSBbcnVuLCBpbnZhbGlkYXRlXTtcbiAgICAgICAgc3Vic2NyaWJlcnMucHVzaChzdWJzY3JpYmVyKTtcbiAgICAgICAgaWYgKHN1YnNjcmliZXJzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgc3RvcCA9IHN0YXJ0KHNldCkgfHwgbm9vcDtcbiAgICAgICAgfVxuICAgICAgICBydW4odmFsdWUpO1xuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBzdWJzY3JpYmVycy5pbmRleE9mKHN1YnNjcmliZXIpO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3Vic2NyaWJlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgc3RvcCgpO1xuICAgICAgICAgICAgICAgIHN0b3AgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4geyBzZXQsIHVwZGF0ZSwgc3Vic2NyaWJlIH07XG59XG5mdW5jdGlvbiBkZXJpdmVkKHN0b3JlcywgZm4sIGluaXRpYWxfdmFsdWUpIHtcbiAgICBjb25zdCBzaW5nbGUgPSAhQXJyYXkuaXNBcnJheShzdG9yZXMpO1xuICAgIGNvbnN0IHN0b3Jlc19hcnJheSA9IHNpbmdsZVxuICAgICAgICA/IFtzdG9yZXNdXG4gICAgICAgIDogc3RvcmVzO1xuICAgIGNvbnN0IGF1dG8gPSBmbi5sZW5ndGggPCAyO1xuICAgIHJldHVybiByZWFkYWJsZShpbml0aWFsX3ZhbHVlLCAoc2V0KSA9PiB7XG4gICAgICAgIGxldCBpbml0ZWQgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgdmFsdWVzID0gW107XG4gICAgICAgIGxldCBwZW5kaW5nID0gMDtcbiAgICAgICAgbGV0IGNsZWFudXAgPSBub29wO1xuICAgICAgICBjb25zdCBzeW5jID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHBlbmRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBmbihzaW5nbGUgPyB2YWx1ZXNbMF0gOiB2YWx1ZXMsIHNldCk7XG4gICAgICAgICAgICBpZiAoYXV0bykge1xuICAgICAgICAgICAgICAgIHNldChyZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2xlYW51cCA9IGlzX2Z1bmN0aW9uKHJlc3VsdCkgPyByZXN1bHQgOiBub29wO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCB1bnN1YnNjcmliZXJzID0gc3RvcmVzX2FycmF5Lm1hcCgoc3RvcmUsIGkpID0+IHN0b3JlLnN1YnNjcmliZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHZhbHVlc1tpXSA9IHZhbHVlO1xuICAgICAgICAgICAgcGVuZGluZyAmPSB+KDEgPDwgaSk7XG4gICAgICAgICAgICBpZiAoaW5pdGVkKSB7XG4gICAgICAgICAgICAgICAgc3luYygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAoKSA9PiB7XG4gICAgICAgICAgICBwZW5kaW5nIHw9ICgxIDw8IGkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIGluaXRlZCA9IHRydWU7XG4gICAgICAgIHN5bmMoKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICAgICAgICBydW5fYWxsKHVuc3Vic2NyaWJlcnMpO1xuICAgICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICB9O1xuICAgIH0pO1xufVxuXG5leHBvcnQgeyBkZXJpdmVkLCByZWFkYWJsZSwgd3JpdGFibGUgfTtcbiIsIjxzY3JpcHQgY29udGV4dD1cIm1vZHVsZVwiPlxuXHRleHBvcnQgY29uc3QgVEFCUyA9IHt9O1xuPC9zY3JpcHQ+XG5cbjxzY3JpcHQ+XG5cdGltcG9ydCB7IHNldENvbnRleHQsIG9uRGVzdHJveSB9IGZyb20gJ3N2ZWx0ZSc7XG5cdGltcG9ydCB7IHdyaXRhYmxlIH0gZnJvbSAnc3ZlbHRlL3N0b3JlJztcblxuXHRjb25zdCB0YWJzID0gW107XG5cdGNvbnN0IHBhbmVscyA9IFtdO1xuXHRjb25zdCBzZWxlY3RlZFRhYiA9IHdyaXRhYmxlKG51bGwpO1xuXHRjb25zdCBzZWxlY3RlZFBhbmVsID0gd3JpdGFibGUobnVsbCk7XG5cblx0c2V0Q29udGV4dChUQUJTLCB7XG5cdFx0cmVnaXN0ZXJUYWI6IHRhYiA9PiB7XG5cdFx0XHR0YWJzLnB1c2godGFiKTtcblx0XHRcdHNlbGVjdGVkVGFiLnVwZGF0ZShjdXJyZW50ID0+IGN1cnJlbnQgfHwgdGFiKTtcblx0XHRcdFxuXHRcdFx0b25EZXN0cm95KCgpID0+IHtcblx0XHRcdFx0Y29uc3QgaSA9IHRhYnMuaW5kZXhPZih0YWIpO1xuXHRcdFx0XHR0YWJzLnNwbGljZShpLCAxKTtcblx0XHRcdFx0c2VsZWN0ZWRUYWIudXBkYXRlKGN1cnJlbnQgPT4gY3VycmVudCA9PT0gdGFiID8gKHRhYnNbaV0gfHwgdGFic1t0YWJzLmxlbmd0aCAtIDFdKSA6IGN1cnJlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdHJlZ2lzdGVyUGFuZWw6IHBhbmVsID0+IHtcblx0XHRcdHBhbmVscy5wdXNoKHBhbmVsKTtcblx0XHRcdHNlbGVjdGVkUGFuZWwudXBkYXRlKGN1cnJlbnQgPT4gY3VycmVudCB8fCBwYW5lbCk7XG5cdFx0XHRcblx0XHRcdG9uRGVzdHJveSgoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGkgPSBwYW5lbHMuaW5kZXhPZihwYW5lbCk7XG5cdFx0XHRcdHBhbmVscy5zcGxpY2UoaSwgMSk7XG5cdFx0XHRcdHNlbGVjdGVkUGFuZWwudXBkYXRlKGN1cnJlbnQgPT4gY3VycmVudCA9PT0gcGFuZWwgPyAocGFuZWxzW2ldIHx8IHBhbmVsc1twYW5lbHMubGVuZ3RoIC0gMV0pIDogY3VycmVudCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0c2VsZWN0VGFiOiB0YWIgPT4ge1xuXHRcdFx0Y29uc3QgaSA9IHRhYnMuaW5kZXhPZih0YWIpO1xuXHRcdFx0c2VsZWN0ZWRUYWIuc2V0KHRhYik7XG5cdFx0XHRzZWxlY3RlZFBhbmVsLnNldChwYW5lbHNbaV0pO1xuXHRcdH0sXG5cblx0XHRzZWxlY3RlZFRhYixcblx0XHRzZWxlY3RlZFBhbmVsXG5cdH0pO1xuPC9zY3JpcHQ+XG5cbjxzdHlsZT5cblx0LnRhYnMge1xuXHRcdGJhY2tncm91bmQtY29sb3I6IHZhcigtLWdyYXktYmcpO1xuXHRcdGJvcmRlcjogc29saWQgMXB4IHZhcigtLWdyYXktYm9yZGVyKTtcblx0XHRib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzKTtcblx0fVxuPC9zdHlsZT5cblxuPGRpdiBjbGFzcz1cInRhYnNcIj5cblx0PHNsb3Q+PC9zbG90PlxuPC9kaXY+IiwiPHNjcmlwdD5cblx0aW1wb3J0IHsgZ2V0Q29udGV4dCB9IGZyb20gJ3N2ZWx0ZSc7XG5cdGltcG9ydCB7IFRBQlMgfSBmcm9tICcuL1RhYnMuc3ZlbHRlJztcblxuXHRjb25zdCBwYW5lbCA9IHt9O1xuXHRjb25zdCB7IHJlZ2lzdGVyUGFuZWwsIHNlbGVjdGVkUGFuZWwgfSA9IGdldENvbnRleHQoVEFCUyk7XG5cblx0cmVnaXN0ZXJQYW5lbChwYW5lbCk7XG48L3NjcmlwdD5cblxueyNpZiAkc2VsZWN0ZWRQYW5lbCA9PT0gcGFuZWx9XG5cdDxzbG90Pjwvc2xvdD5cbnsvaWZ9IiwiPHNjcmlwdD5cblx0aW1wb3J0IHsgZ2V0Q29udGV4dCB9IGZyb20gJ3N2ZWx0ZSc7XG5cdGltcG9ydCB7IFRBQlMgfSBmcm9tICcuL1RhYnMuc3ZlbHRlJztcblxuXHRjb25zdCB0YWIgPSB7fTtcblx0Y29uc3QgeyByZWdpc3RlclRhYiwgc2VsZWN0VGFiLCBzZWxlY3RlZFRhYiB9ID0gZ2V0Q29udGV4dChUQUJTKTtcblxuXHRyZWdpc3RlclRhYih0YWIpO1xuPC9zY3JpcHQ+XG5cbjxzdHlsZT5cblx0YnV0dG9uIHtcblx0XHRiYWNrZ3JvdW5kOiBub25lO1xuXHRcdGJvcmRlcjogbm9uZTtcblx0XHRib3JkZXItcmFkaXVzOiAwO1xuXHRcdG1hcmdpbjogMDtcblx0XHRjb2xvcjogI2JiYjtcblx0XHRmb250LXNpemU6IDFlbTtcblx0XHRwYWRkaW5nOiAxZW07XG5cdFx0Y3Vyc29yOiBwb2ludGVyO1xuXHRcdGZsZXg6IDE7XG5cdFx0Ym9yZGVyLWJvdHRvbTogM3B4IHNvbGlkIHZhcigtLWdyYXktYmcpO1xuXHRcdC8qIGJvcmRlci1sZWZ0OiAxcHggc29saWQgdmFyKC0tZ3JheS1ib3JkZXIpOyAqL1xuXHR9XG5cblx0YnV0dG9uOmZvY3VzIHtcblx0XHRvdXRsaW5lOjA7XG5cdH1cblx0XG5cdC5zZWxlY3RlZCB7XG5cdFx0Ym9yZGVyLWJvdHRvbTogM3B4IHNvbGlkIHZhcigtLW9yYW5nZSk7XG5cdFx0Y29sb3I6ICMzMzM7XG5cdH1cbjwvc3R5bGU+XG5cbjxidXR0b24gY2xhc3M6c2VsZWN0ZWQ9XCJ7JHNlbGVjdGVkVGFiID09PSB0YWJ9XCIgb246Y2xpY2s9XCJ7KCkgPT4gc2VsZWN0VGFiKHRhYil9XCI+XG5cdDxzbG90Pjwvc2xvdD5cbjwvYnV0dG9uPiIsIjxzY3JpcHQ+XG4gIGV4cG9ydCBsZXQgYXBwbGljYXRpb25EYXRhO1xuPC9zY3JpcHQ+XG5cbjxzdHlsZT5cblxuXHQuYXBwbGljYXRpb24ge1xuXHRcdHBhZGRpbmc6IDEuNWVtO1xuXHRcdGRpc3BsYXk6IGdyaWQ7XG5cdFx0Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoOCwgMWZyKTtcblx0XHRncmlkLWNvbHVtbi1nYXA6IDJlbTtcblx0fVxuXG5cdC5sZWZ0IHtcblx0XHRncmlkLWNvbHVtbi1zdGFydDogMTtcblx0XHRncmlkLWNvbHVtbi1lbmQ6IDY7XG5cdH1cblxuXHQucmlnaHQge1xuXHRcdGdyaWQtY29sdW1uLXN0YXJ0OiA2O1xuXHRcdGdyaWQtY29sdW1uLWVuZDogOTtcblx0fVxuXG5cdC5ib3R0b20ge1xuXHRcdGdyaWQtY29sdW1uLXN0YXJ0OiAxO1xuXHRcdGdyaWQtY29sdW1uLWVuZDogOTtcblx0XHRkaXNwbGF5OiBncmlkO1xuXHRcdGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDMsIDFmcik7XG5cdFx0Z3JpZC1jb2x1bW4tZ2FwOiAxLjVlbTtcblx0fVxuXG5cdC5hcHBsaWNhdGlvbi10aXRsZSB7XG5cdFx0bWFyZ2luLXRvcDogMDtcblx0fVxuXG5cdC8qIC5hcHBsaWNhdGlvbi1kZXNjcmlwdGlvbiB7XG5cdH0gKi9cblxuXHQuYXBwbGljYXRpb24tb3Bwb3J0dW5pdGllcywgLmFwcGxpY2F0aW9uLWNoYWxsZW5nZXMge1xuXHRcdGdyaWQtY29sdW1uLXN0YXJ0OiA2O1xuXHRcdGdyaWQtY29sdW1uLWVuZDogOTtcblx0fVxuXG5cdC5vcHBvcnR1bml0aWVzLXRpdGxlLCAuY2hhbGxlbmdlcy10aXRsZSB7XG5cdFx0bWFyZ2luLXRvcDogMDtcblx0XHRtYXJnaW4tYm90dG9tOiAxZW07XG5cdH1cblxuXHQuZXhhbXBsZS10aXRsZSB7XG5cdFx0bWFyZ2luLWJvdHRvbTogMC41ZW07XG5cdFx0LyogaGVpZ2h0OiA2MHB4OyAqL1xuXHR9XG5cblx0dWwge1xuXHRcdGxpbmUtaGVpZ2h0OiAxLjJlbTtcblx0fVxuXG5cdGxpIHtcblx0XHRtYXJnaW4tYm90dG9tOiAwLjhlbTtcblx0fVxuXG5cdC5leGFtcGxlLWRlc2NyaXB0aW9uIHtcblx0XHRmb250LXNpemU6IDAuOGVtO1xuXHRcdGxpbmUtaGVpZ2h0OiAxLjRlbTtcblx0XHRjb2xvcjogdmFyKC0tZ3JheSk7XG5cdH1cblxuXHRpbWcge1xuXHRcdHdpZHRoOiAxMDAlO1xuXHRcdGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWdyYXktYm9yZGVyKVxuXHR9XG5cblx0LmV4YW1wbGUgPiBhIHtcblx0XHRib3JkZXItYm90dG9tOiBub25lO1xuXHR9XG5cbjwvc3R5bGU+XG5cbjxkaXYgY2xhc3M9XCJhcHBsaWNhdGlvblwiPlxuXG5cdDxkaXYgY2xhc3M9XCJsZWZ0XCI+XG5cdFx0PGgzIGNsYXNzPVwiYXBwbGljYXRpb24tdGl0bGVcIj57YXBwbGljYXRpb25EYXRhLnRpdGxlfTwvaDM+XG5cdFx0PGRpdiBjbGFzcz1cImFwcGxpY2F0aW9uLWRlc2NyaXB0aW9uXCI+e2FwcGxpY2F0aW9uRGF0YS5kZXNjcmlwdGlvbn08L2Rpdj5cblx0PC9kaXY+XG5cblx0PGRpdiBjbGFzcz1cInJpZ2h0XCI+XG5cdFx0PGRpdiBjbGFzcz1cImFwcGxpY2F0aW9uLW9wcG9ydHVuaXRpZXNcIj5cblx0XHRcdDxoNCBjbGFzcz1cIm9wcG9ydHVuaXRpZXMtdGl0bGVcIj5PcHBvcnR1bml0aWVzPC9oND5cblx0XHRcdDx1bD5cblx0XHRcdFx0eyNlYWNoIGFwcGxpY2F0aW9uRGF0YS5vcHBvcnR1bml0aWVzIGFzIG9wcG9ydHVuaXR5fVxuXHRcdFx0XHRcdDxsaT5cblx0XHRcdFx0XHRcdHtvcHBvcnR1bml0eX1cblx0XHRcdFx0XHQ8L2xpPlxuXHRcdFx0XHR7L2VhY2h9XG5cdFx0XHQ8L3VsPlxuXHRcdDwvZGl2PlxuXHRcdDxicj5cblx0XHQ8ZGl2IGNsYXNzPVwiYXBwbGljYXRpb24tY2hhbGxlbmdlc1wiPlxuXHRcdFx0PGg0IGNsYXNzPVwiY2hhbGxlbmdlcy10aXRsZVwiPkNoYWxsZW5nZXM8L2g0PlxuXHRcdFx0PHVsPlxuXHRcdFx0XHR7I2VhY2ggYXBwbGljYXRpb25EYXRhLmNoYWxsZW5nZXMgYXMgY2hhbGxlbmdlfVxuXHRcdFx0XHRcdDxsaT5cblx0XHRcdFx0XHRcdHtjaGFsbGVuZ2V9XG5cdFx0XHRcdFx0PC9saT5cblx0XHRcdFx0ey9lYWNofVxuXHRcdFx0PC91bD5cblx0XHQ8L2Rpdj5cblx0PC9kaXY+XG5cblx0PGJyPlxuXG5cdDxkaXYgY2xhc3M9XCJib3R0b21cIj5cblx0eyNlYWNoIGFwcGxpY2F0aW9uRGF0YS5leGFtcGxlcyBhcyBleGFtcGxlfVxuXHRcdDxkaXYgY2xhc3M9XCJleGFtcGxlXCI+XG5cdFx0XHQ8YSBocmVmPXtleGFtcGxlLnVybH0+PGltZyBzcmM9XCJpbWFnZXMvYXBwbGljYXRpb24tdGFicy97ZXhhbXBsZS5pbWFnZX1cIi8+PC9hPlxuXHRcdFx0PGRpdiBjbGFzcz1cImV4YW1wbGUtdGl0bGVcIj48YSBocmVmPXtleGFtcGxlLnVybH0+e2V4YW1wbGUudGl0bGV9PC9hPjwvZGl2PlxuXHRcdFx0PGRpdiBjbGFzcz1cImV4YW1wbGUtZGVzY3JpcHRpb25cIj57ZXhhbXBsZS5kZXNjcmlwdGlvbn08L2Rpdj5cblx0XHQ8L2Rpdj5cblx0ey9lYWNofVxuXHQ8L2Rpdj5cbjwvZGl2PlxuIiwiPHNjcmlwdD5cblx0aW1wb3J0IHsgVGFicywgVGFiTGlzdCwgVGFiUGFuZWwsIFRhYiB9IGZyb20gJy4vdGFicy90YWJzLmpzJztcblx0aW1wb3J0IEFwcGxpY2F0aW9uIGZyb20gXCIuL2FwcGxpY2F0aW9uLnN2ZWx0ZVwiXG5cdGltcG9ydCBhcHBsaWNhdGlvbkRhdGEgZnJvbSBcIi4vYXBwbGljYXRpb24uanNvblwiXG48L3NjcmlwdD5cblxuPFRhYnM+XG5cdDxUYWJMaXN0PlxuXHRcdHsjZWFjaCBhcHBsaWNhdGlvbkRhdGEgYXMgYXBwbGljYXRpb259XG4gICAgXHQ8VGFiPlxuXHRcdFx0e2FwcGxpY2F0aW9uLnRpdGxlfVxuXHRcdDwvVGFiPlxuXHR7L2VhY2h9XG5cdDwvVGFiTGlzdD5cblxuXHR7I2VhY2ggYXBwbGljYXRpb25EYXRhIGFzIGFwcGxpY2F0aW9ufVxuICAgIFx0PFRhYlBhbmVsPlxuXHRcdFx0PEFwcGxpY2F0aW9uIGFwcGxpY2F0aW9uRGF0YT17YXBwbGljYXRpb259IC8+XG5cdFx0PC9UYWJQYW5lbD5cblx0ey9lYWNofVxuXG48L1RhYnM+IiwiPHNjcmlwdD5cbiAgICBpbXBvcnQgeyBvbkRlc3Ryb3kgfSBmcm9tICdzdmVsdGUnO1xuXG4gICAgbGV0IGZyYW1lTnVtYmVyID0gMTtcbiAgICBsZXQgaXNQbGF5aW5nID0gZmFsc2U7XG5cbiAgICBjb25zdCBudW1PZkZyYW1lcyA9IDExO1xuICAgIGNvbnN0IGZyYW1lSW50QXJyYXkgPSBBcnJheS5mcm9tKG5ldyBBcnJheShudW1PZkZyYW1lcyksICh4LGkpID0+IGkrMSk7XG5cbiAgICBsZXQgcGxheUludGVydmFsO1xuXG4gICAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICAgICAgaWYgKCFpc1BsYXlpbmcpIHtcbiAgICAgICAgICAgIGlzUGxheWluZyA9IHRydWU7XG4gICAgICAgICAgICBwbGF5SW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGZyYW1lTnVtYmVyID0gZnJhbWVOdW1iZXIgJSBudW1PZkZyYW1lcztcbiAgICAgICAgICAgICAgICAgICAgZnJhbWVOdW1iZXIgKz0gMTtcbiAgICAgICAgICAgICAgICB9LCAxMDApOyAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgICAgIGlzUGxheWluZyA9IGZhbHNlO1xuICAgICAgICBjbGVhckludGVydmFsKHBsYXlJbnRlcnZhbClcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjaGFuZ2VGcmFtZShpKSB7XG4gICAgICAgIHBhdXNlKClcbiAgICAgICAgZnJhbWVOdW1iZXIgPSBpO1xuICAgIH1cblxuICAgIHBsYXkoKTtcblxuPC9zY3JpcHQ+XG5cbjxzdHlsZT5cbiAgICBcbiAgICAjd3JhcHBlciB7XG4gICAgICAgIG1hcmdpbi10b3A6IDEuNWVtO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxLjVlbTtcbiAgICAgICAgLyogYm9yZGVyOiAxcHggc29saWQgdmFyKC0tZ3JheS1ib3JkZXIpOyAqL1xuICAgICAgICAvKiBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzKTsgKi9cbiAgICAgICAgLyogcGFkZGluZzogMC41ZW07ICovXG4gICAgfVxuXG4gICAgI2ZyYW1lcyB7XG5cdFx0ZGlzcGxheTogZ3JpZDtcblx0XHRncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgxMSwgMWZyKTtcbiAgICAgICAgZ3JpZC1jb2x1bW4tZ2FwOiAwLjJlbTtcbiAgICAgICAgcGFkZGluZy10b3A6IDEwcHg7XG4gICAgfVxuXG4gICAgLmZyYW1lIHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIC8qIGJvcmRlci1ib3R0b206IDVweCBzb2xpZCB3aGl0ZTsgKi9cbiAgICAgICAgZmlsdGVyOiBicmlnaHRuZXNzKDYwJSk7XG4gICAgICAgIGN1cnNvcjogY3Jvc3NoYWlyO1xuICAgIH1cblxuICAgIC5hY3RpdmUtZnJhbWUge1xuICAgICAgICBib3JkZXItYm90dG9tOiAzcHggc29saWQgdmFyKC0tb3JhbmdlKTtcbiAgICAgICAgcGFkZGluZy1ib3R0b206IDJweDtcbiAgICAgICAgZmlsdGVyOiBicmlnaHRuZXNzKDEwMCUpO1xuICAgIH1cblxuICAgICNob3JzZS13cmFwcGVyIHtcbiAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMTIsIDFmcik7XG4gICAgICAgIGdyaWQtY29sdW1uLWdhcDogMmVtO1xuICAgIH1cblxuICAgICNob3JzZSB7XG4gICAgICAgIGdyaWQtY29sdW1uLXN0YXJ0OiAxO1xuICAgICAgICBncmlkLWNvbHVtbi1lbmQ6IDc7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgIH1cblxuICAgICNob3JzZS1jb250cm9scyB7XG4gICAgICAgIGdyaWQtY29sdW1uLXN0YXJ0OiA3O1xuICAgICAgICBncmlkLWNvbHVtbi1lbmQ6IDExO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICB9XG5cbiAgICAuc2xpZGVyIHtcbiAgICAgICAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xuICAgICAgICBhcHBlYXJhbmNlOiBub25lO1xuICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgICBvcGFjaXR5OiAwLjc7XG4gICAgICAgIC13ZWJraXQtdHJhbnNpdGlvbjogLjJzO1xuICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IC4ycztcbiAgICAgICAgaGVpZ2h0OiAzcHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDJweDtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogaHNsYSgwLCAwJSwgMCUsIDAuMik7XG4gICAgfVxuXG4gICAgLnNsaWRlcjpob3ZlciB7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgfVxuXG4gICAgLnNsaWRlcjo6LXdlYmtpdC1zbGlkZXItdGh1bWIge1xuICAgICAgICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7IC8qIE92ZXJyaWRlIGRlZmF1bHQgbG9vayAqL1xuICAgICAgICBhcHBlYXJhbmNlOiBub25lO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7IC8qIEN1cnNvciBvbiBob3ZlciAqL1xuICAgICAgICB0b3A6IC02cHg7XG4gICAgICAgIGxlZnQ6IC02cHg7XG4gICAgICAgIHdpZHRoOiAxM3B4O1xuICAgICAgICBoZWlnaHQ6IDEzcHg7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLW9yYW5nZSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICB9XG5cbiAgICAuc2xpZGVyOjotbW96LXJhbmdlLXRodW1iIHtcbiAgICAgICAgdG9wOiAtNnB4O1xuICAgICAgICBsZWZ0OiAtNnB4O1xuICAgICAgICB3aWR0aDogMTNweDtcbiAgICAgICAgaGVpZ2h0OiAxM3B4O1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1vcmFuZ2UpO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgfVxuXG4gICAgYnV0dG9uIHtcbiAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIG91dGxpbmU6IGluaGVyaXQ7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1vcmFuZ2UpO1xuICAgIH1cblxuPC9zdHlsZT5cblxuPGRpdiBpZD1cIndyYXBwZXJcIj5cbiAgICBcbiAgICA8ZGl2IGlkPVwiaG9yc2Utd3JhcHBlclwiPlxuICAgICAgICA8aW1nIGlkPVwiaG9yc2VcIiBzcmM9XCJpbWFnZXMvaG9yc2Uve2ZyYW1lTnVtYmVyfS5qcGdcIiBhbHQ9XCJIb3JzZSBydW5uaW5nLlwiLz5cbiAgICAgICAgPGRpdiBpZD1cImhvcnNlLWNvbnRyb2xzXCI+XG4gICAgICAgICAgICA8ZmlnY2FwdGlvbj5cbiAgICAgICAgICAgICAgICBJbiAxODc4LCBFYWR3ZWFyZCBNdXlicmlkZ2Ugc2V0dGxlZCBMZWxhbmQgU3RhbmZvcmQncyBob3RseSBkZWJhdGVkIHF1ZXN0aW9uIG9mIHdoZXRoZXIgYWxsIGZvdXIgZmVldCBvZiBhIGhvcnNlIGxpZnRlZCBvZmYgdGhlIGdyb3VuZCBkdXJpbmcgYSB0cm90IHVzaW5nIG11bHRpcGxlIGNhbWVyYXMgdG8gY2FwdHVyZSBtb3Rpb24gaW4gc3RvcC1tb3Rpb24gcGhvdG9ncmFwaHMuXG4gICAgICAgICAgICAgICAgVGhpcyBpbnRlcmFjdGl2ZSBncmFwaGljIHVzZXMgPGk+YW5pbWF0aW9uPC9pPiBhbmQgPGk+bXVsdGlwbGUgcmVwcmVzZW50YXRpb25zPC9pPiB0byBpbGx1c3RyYXRlIHRoaXMgZmluZGluZy5cbiAgICAgICAgICAgICA8L2ZpZ2NhcHRpb24+XG4gICAgICAgICAgICAgPCEtLSBUaGVzZSBpbWFnZXMgYXJlIGZyb20gdGhlIGhvcnNlIFNhbGxpZSBHYXJkbmVyLCBvd25lZCBieSBMZWxhbmQgU3RhbmZvcmQsIHJ1bm5pbmcgYXQgYSAxOjQwIHBhY2Ugb3ZlciB0aGUgUGFsbyBBbHRvIHRyYWNrLCBvbiBKdW5lIDE5dGgsIDE4NzguIC0tPlxuICAgICAgICAgICAgPCEtLSA8ZGl2PiAtLT5cbiAgICAgICAgICAgIDwhLS0gPGJyIC8+IC0tPlxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmctYm90dG9tOiA1cHg7XCI+XG4gICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1yYW5nZSBiaW5kOnZhbHVlPXtmcmFtZU51bWJlcn0gbWluPTEgbWF4PTExIG9uOm1vdXNlZG93bj17cGF1c2V9IGNsYXNzPVwic2xpZGVyXCI+XG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uOmNsaWNrPXtpc1BsYXlpbmcgPyBwYXVzZSA6IHBsYXl9PjxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIiBzdHlsZT1cImZvbnQtc2l6ZTo0OHB4O1wiPntpc1BsYXlpbmcgPyBcInBhdXNlX2NpcmNsZV9vdXRsaW5lXCI6IFwicGxheV9jaXJjbGVfb3V0bGluZVwifTwvaT48L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGlkPVwiZnJhbWVzXCI+XG4gICAgICAgIHsjZWFjaCBmcmFtZUludEFycmF5IGFzIGZyYW1lSW50LCBpfVxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiaW1hZ2VzL2hvcnNlL3tmcmFtZUludH0uanBnXCIgYWx0PVwiSG9yc2UgcnVubmluZy5cIiBjbGFzcz0ne2ZyYW1lSW50ID09PSBmcmFtZU51bWJlciA/IFwiZnJhbWUgYWN0aXZlLWZyYW1lXCI6IFwiZnJhbWVcIn0nIG9uOm1vdXNlb3Zlcj17KCkgPT4gY2hhbmdlRnJhbWUoaSsxKX0vPlxuICAgICAgICB7L2VhY2h9XG4gICAgPC9kaXY+XG48L2Rpdj4iLCIvLyBIb3QgcmVsb2FkaW5nXG5pbXBvcnQgKiBhcyBfdW51c2VkIGZyb20gXCJyYXctbG9hZGVyIS4vaW5kZXguZWpzXCI7XG4vLyBUT0RPOiBkaXNhYmxlIGJlZm9yZSBwdWJsaXNoaW5nXG5cbmltcG9ydCBFeGFtcGxlIGZyb20gXCIuL2RpYWdyYW1zL3N2ZWx0ZS1leGFtcGxlLnN2ZWx0ZVwiO1xuaW1wb3J0IFJlc2VhcmNoUHJhY3RpY2VUYWJsZSBmcm9tIFwiLi9kaWFncmFtcy9yZXNlYXJjaC14LXByYWN0aWNlLXRhYmxlLnN2ZWx0ZVwiXG5pbXBvcnQgVE9DIGZyb20gXCIuL2RpYWdyYW1zL3RvYy5zdmVsdGVcIlxuaW1wb3J0IEFwcGxpY2F0aW9uVGFicyBmcm9tIFwiLi9kaWFncmFtcy9hcHBsaWNhdGlvbi10YWJzL2FwcGxpY2F0aW9uLXRhYnMuc3ZlbHRlXCJcbmltcG9ydCBIb3JzZSBmcm9tIFwiLi9kaWFncmFtcy9ob3JzZS5zdmVsdGVcIlxuaW1wb3J0IEd1dHRlclRlc3QgZnJvbSBcIi4vZGlhZ3JhbXMvZ3V0dGVyLnN2ZWx0ZVwiXG5cbi8vIGxhemlseSBpbml0aWFsaXplIGFueSBkaWFncmFtIGJlbG93IHRoZSBmb2xkLiBFLkc6XG5cbi8vIGNvbnN0IGV4YW1wbGVUYWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN2ZWx0ZS1leGFtcGxlLWRmaWd1cmVcIik7XG4vLyBsZXQgZXhhbXBsZTtcbi8vIGV4YW1wbGVUYWcuYWRkRXZlbnRMaXN0ZW5lcihcInJlYWR5XCIsICgpID0+IHtcblx0Ly8gY29uc3QgdGFyZ2V0ID0gZXhhbXBsZVRhZy5xdWVyeVNlbGVjdG9yKFwiI3N2ZWx0ZS1leGFtcGxlLXRhcmdldFwiKTtcblx0Ly8gZXhhbXBsZSA9IG5ldyBFeGFtcGxlKHsgdGFyZ2V0IH0pO1xuLy8gfSk7XG5cbmNvbnN0IHJlc2VhcmNoUHJhY3RpY2VUYWJsZSA9IG5ldyBSZXNlYXJjaFByYWN0aWNlVGFibGUoe1xuXHR0YXJnZXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXNlYXJjaC14LXByYWN0aWNlJylcbn0pO1xuXG5jb25zdCB0b2MgPSBuZXcgVE9DKHtcblx0dGFyZ2V0OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVudHMnKVxufSk7XG5cbmNvbnN0IGFwcGxpY2F0aW9uVGFicyA9IG5ldyBBcHBsaWNhdGlvblRhYnMoe1xuXHR0YXJnZXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHBsaWNhdGlvbnMtdGFiJylcbn0pO1xuXG5jb25zdCBndXR0ZXJUZXN0ID0gbmV3IEd1dHRlclRlc3Qoe1xuXHR0YXJnZXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndXR0ZXItdGVzdCcpXG59KTtcblxuY29uc3QgaG9yc2UgPSBuZXcgSG9yc2Uoe1xuXHR0YXJnZXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdob3JzZScpXG59KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=